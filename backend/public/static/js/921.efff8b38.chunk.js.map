{"version":3,"file":"static/js/921.efff8b38.chunk.js","mappings":"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","sources":["pages/employees/AttendancePage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport api from \"../../api/axios\";\r\nimport { formatTime, calculateHours, calculateWeeklyStats, calculateMonthlyStats } from \"../../utils/dateUtils\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport FaceEnrollment from \"../../components/FaceEnrollment\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\n// Fix default marker icon issue in Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\n// --- UI Components ---\r\n\r\nconst Card = ({ children, className }) => (\r\n    <div className={`bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200 ${className}`}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CardHeader = ({ children }) => (\r\n    <div className=\"p-6 border-b border-gray-100 dark:border-gray-700\">\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CardContent = ({ children, className }) => (\r\n    <div className={`p-6 ${className}`}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CardTitle = ({ children }) => (\r\n    <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white m-0\">\r\n        {children}\r\n    </h2>\r\n);\r\n\r\nconst Button = ({ children, onClick, disabled, variant = \"primary\", className }) => {\r\n    const variants = {\r\n        primary: \"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg disabled:bg-blue-300 disabled:shadow-none\",\r\n        success: \"bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg disabled:bg-emerald-300 disabled:shadow-none\",\r\n        outline: \"bg-transparent border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50\",\r\n        destructive: \"bg-red-600 hover:bg-red-700 text-white shadow-md hover:shadow-lg disabled:bg-red-300 disabled:shadow-none\"\r\n    };\r\n\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n            className={`px-5 py-2.5 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center ${variants[variant]} ${disabled ? 'cursor-not-allowed' : 'cursor-pointer'} ${className}`}\r\n        >\r\n            {children}\r\n        </button>\r\n    );\r\n};\r\n\r\nconst Alert = ({ children, variant = \"error\" }) => (\r\n    <div className={`p-4 rounded-lg mb-4 text-sm border ${variant === \"error\"\r\n        ? \"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-700 dark:text-red-400\"\r\n        : \"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-400\"\r\n        }`}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst Badge = ({ children, variant = \"default\" }) => {\r\n    const styles = {\r\n        default: \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\",\r\n        success: \"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400\",\r\n        danger: \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\",\r\n        warning: \"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400\",\r\n        Present: \"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400\",\r\n        Absent: \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\",\r\n        Late: \"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400\",\r\n        \"Half Day\": \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\"\r\n    };\r\n\r\n    const current = styles[variant] || styles.default;\r\n\r\n    return (\r\n        <span className={`inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ${current}`}>\r\n            {children}\r\n        </span>\r\n    );\r\n};\r\n\r\n// --- Main Page Component ---\r\n\r\nconst AttendancePage = () => {\r\n    const { user, refreshUser } = useAuth();\r\n    const [attendance, setAttendance] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [actionError, setActionError] = useState(null);\r\n    const [successMessage, setSuccessMessage] = useState(null);\r\n    const [isCheckingIn, setIsCheckingIn] = useState(false);\r\n    const [isCheckingOut, setIsCheckingOut] = useState(false);\r\n    const [currentLocation, setCurrentLocation] = useState(null);\r\n    const [showLocationModal, setShowLocationModal] = useState(false);\r\n    const [pendingAction, setPendingAction] = useState(null); // 'check-in' or 'check-out'\r\n    \r\n    // Pending checkouts modal states\r\n    const [showPendingCheckoutsModal, setShowPendingCheckoutsModal] = useState(false);\r\n    const [pendingCheckouts, setPendingCheckouts] = useState([]);\r\n\r\n    // Overtime states\r\n    const [isStartingOvertime, setIsStartingOvertime] = useState(false);\r\n    const [isEndingOvertime, setIsEndingOvertime] = useState(false);\r\n\r\n    // Face enrollment state\r\n    const [showFaceEnrollmentModal, setShowFaceEnrollmentModal] = useState(false);\r\n    const [needsFaceEnrollment, setNeedsFaceEnrollment] = useState(false);\r\n\r\n    const isSecureContext = typeof window !== 'undefined' ? window.isSecureContext : false;\r\n\r\n    // Month Filter State\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); // YYYY-MM\r\n\r\n    // Fetch Attendance Data\r\n    const fetchAttendance = async () => {\r\n        try {\r\n            setError(null);\r\n            // Using /my-attendance which is the correct existing endpoint\r\n            const response = await api.get(\"/my-attendance\");\r\n            const data = response.data.data || response.data; // Handle pagination if present\r\n            setAttendance(Array.isArray(data) ? data : []);\r\n        } catch (err) {\r\n            console.error(\"Fetch error:\", err);\r\n            setError(\"Failed to load attendance records. Please try again later.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchAttendance();\r\n    }, []);\r\n\r\n    // Clear messages after 3 seconds\r\n    useEffect(() => {\r\n        if (successMessage || actionError) {\r\n            const timer = setTimeout(() => {\r\n                setSuccessMessage(null);\r\n                setActionError(null);\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [successMessage, actionError]);\r\n\r\n    // Prevent body scroll when modal is open\r\n    useEffect(() => {\r\n        if (showLocationModal) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'unset';\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [showLocationModal]);\r\n\r\n    // Get Location - REQUIRED, no fallback\r\n    const getLocation = () => {\r\n        return new Promise((resolve, reject) => {\r\n            if (!isSecureContext) {\r\n                reject(\r\n                    new Error(\r\n                        'Location requires a secure context. Open the app on http://localhost:3000 (or use HTTPS).'\r\n                    )\r\n                );\r\n                return;\r\n            }\r\n\r\n            console.log(\"ðŸ” Checking geolocation support...\");\r\n            \r\n            if (!navigator.geolocation) {\r\n                console.error(\"âŒ Geolocation not supported\");\r\n                reject(new Error(\"Geolocation is not supported by your browser. Please use a modern browser to check in.\"));\r\n                return;\r\n            }\r\n\r\n            console.log(\"âœ… Geolocation supported, requesting permission...\");\r\n\r\n            // Helpful diagnostic (does not trigger prompt)\r\n            if (navigator.permissions?.query) {\r\n                navigator.permissions\r\n                    .query({ name: 'geolocation' })\r\n                    .then((status) => {\r\n                        console.log('ðŸ§­ Geolocation permission state:', status.state);\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log('ðŸ§­ Geolocation permission query failed:', e);\r\n                    });\r\n            }\r\n\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    console.log(\"âœ… Location obtained:\", position.coords);\r\n                    const location = {\r\n                        latitude: position.coords.latitude,\r\n                        longitude: position.coords.longitude\r\n                    };\r\n                    setCurrentLocation(location);\r\n                    resolve(location);\r\n                },\r\n                (error) => {\r\n                    console.error(\"âŒ Location error:\", error.code, error.message);\r\n                    let errorMessage = \"Location access denied. Please allow location access to check in.\";\r\n                    \r\n                    if (error.code === error.PERMISSION_DENIED) {\r\n                        errorMessage = \"Location permission denied. You must allow location access to check in/out.\";\r\n                    } else if (error.code === error.POSITION_UNAVAILABLE) {\r\n                        errorMessage = \"Location information unavailable. Please try again.\";\r\n                    } else if (error.code === error.TIMEOUT) {\r\n                        errorMessage = \"Location request timed out. Please try again.\";\r\n                    }\r\n                    \r\n                    reject(new Error(errorMessage));\r\n                },\r\n                { \r\n                    timeout: 15000, \r\n                    enableHighAccuracy: true, \r\n                    maximumAge: 0 \r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    // Get Device Information\r\n    const getDeviceInfo = () => {\r\n        const ua = navigator.userAgent;\r\n        let deviceType = 'Desktop';\r\n        \r\n        if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\r\n            deviceType = 'Tablet';\r\n        } else if (/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\r\n            deviceType = 'Mobile';\r\n        }\r\n\r\n        // Extract browser name\r\n        let browser = 'Unknown';\r\n        if (ua.indexOf('Firefox') > -1) browser = 'Firefox';\r\n        else if (ua.indexOf('Chrome') > -1) browser = 'Chrome';\r\n        else if (ua.indexOf('Safari') > -1) browser = 'Safari';\r\n        else if (ua.indexOf('Edge') > -1) browser = 'Edge';\r\n        else if (ua.indexOf('MSIE') > -1 || ua.indexOf('Trident') > -1) browser = 'IE';\r\n\r\n        // Generate a device ID (stored in localStorage)\r\n        let deviceId = localStorage.getItem('device_id');\r\n        if (!deviceId) {\r\n            deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n            localStorage.setItem('device_id', deviceId);\r\n        }\r\n\r\n        return {\r\n            device_id: deviceId,\r\n            device_type: deviceType,\r\n            browser: browser\r\n        };\r\n    };\r\n\r\n    // Check In Handler - Check face enrollment first, then request location\r\n    const handleCheckIn = async () => {\r\n        console.log(\"ðŸ”µ Check-in button clicked\");\r\n        \r\n        // Check if already checked in today\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        const todayRecord = attendance.find(\r\n            (record) => new Date(record.date).toISOString().split(\"T\")[0] === today\r\n        );\r\n        \r\n        if (todayRecord?.check_in) {\r\n            setActionError(\"You have already checked in today.\");\r\n            return;\r\n        }\r\n        \r\n        // Check if face enrollment is required\r\n        if (!user?.face_descriptor) {\r\n            console.log(\"âš ï¸ Face enrollment required for first check-in\");\r\n            const confirmEnroll = window.confirm(\r\n                \"Face enrollment is required for attendance tracking. Would you like to enroll your face now?\"\r\n            );\r\n            \r\n            if (!confirmEnroll) {\r\n                setActionError(\"Face enrollment is required to check in.\");\r\n                return;\r\n            }\r\n            \r\n            setNeedsFaceEnrollment(true);\r\n            setShowFaceEnrollmentModal(true);\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            setPendingAction('check-in');\r\n            setActionError(null);\r\n            \r\n            console.log(\"ðŸ“ Requesting location for check-in...\");\r\n            // Request location permission immediately - this triggers browser prompt\r\n            const location = await getLocation();\r\n            \r\n            console.log(\"âœ… Location received:\", location);\r\n            \r\n            // Check for pending checkouts before proceeding\r\n            const checkResponse = await api.post(\"/my-attendance/check-in\", {\r\n                latitude: location.latitude,\r\n                longitude: location.longitude,\r\n                ...getDeviceInfo()\r\n            });\r\n            \r\n            // If the response indicates pending checkouts\r\n            if (checkResponse.data.requires_action && checkResponse.data.pending_checkouts) {\r\n                console.log(\"âš ï¸ Pending checkouts detected:\", checkResponse.data.pending_checkouts);\r\n                setPendingCheckouts(checkResponse.data.pending_checkouts);\r\n                setShowPendingCheckoutsModal(true);\r\n                setCurrentLocation(location); // Save location for later use\r\n                return;\r\n            }\r\n            \r\n            // If no pending checkouts, proceed normally\r\n            setShowLocationModal(true);\r\n        } catch (err) {\r\n            console.error(\"âŒ Check-in error:\", err);\r\n            \r\n            // If it's a 409 error (already checked in), show appropriate message\r\n            if (err?.response?.status === 409) {\r\n                setActionError(err?.response?.data?.message || \"Already checked in today.\");\r\n            } else {\r\n                setActionError(\r\n                    err?.message ||\r\n                        \"Location access denied. In Brave: click the icon near the URL â†’ Site settings â†’ Location â†’ Allow\"\r\n                );\r\n            }\r\n            setPendingAction(null);\r\n        }\r\n    };\r\n\r\n    // Skip pending checkouts and proceed with new check-in\r\n    const skipPendingCheckoutsAndCheckIn = async () => {\r\n        try {\r\n            setIsCheckingIn(true);\r\n            setActionError(null);\r\n            setShowPendingCheckoutsModal(false);\r\n\r\n            const deviceInfo = getDeviceInfo();\r\n            const payload = {\r\n                latitude: currentLocation.latitude,\r\n                longitude: currentLocation.longitude,\r\n                force_checkin: true, // Force check-in even with pending checkouts\r\n                ...deviceInfo\r\n            };\r\n\r\n            await api.post(\"/my-attendance/check-in\", payload);\r\n            setSuccessMessage(\"Checked in successfully! Don't forget to check out your pending sessions.\");\r\n            await fetchAttendance(); // Reload list\r\n        } catch (err) {\r\n            console.error(\"Force check-in error:\", err);\r\n            setActionError(err?.message || err?.response?.data?.message || \"Failed to check in.\");\r\n        } finally {\r\n            setIsCheckingIn(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n            setPendingCheckouts([]);\r\n        }\r\n    };\r\n\r\n    // Close pending checkouts modal\r\n    const closePendingCheckoutsModal = () => {\r\n        setShowPendingCheckoutsModal(false);\r\n        setPendingCheckouts([]);\r\n        setPendingAction(null);\r\n        setCurrentLocation(null);\r\n    };\r\n\r\n    // Check Out Handler - Current Session Only\r\n    // Check Out Handler - Current Session Only\r\n    const handleCheckOut = async () => {\r\n        console.log(\"ðŸ”´ Check-out button clicked\");\r\n        setActionError(null);\r\n        console.log(\"ðŸ”´ Getting location for check-out...\");\r\n\r\n        try {\r\n            const location = await getLocation();\r\n            console.log(\"âœ… Location obtained:\", location);\r\n            setCurrentLocation(location);\r\n            setPendingAction('check-out');\r\n            setShowLocationModal(true);\r\n        } catch (error) {\r\n            console.error(\"âŒ Location error:\", error);\r\n            setActionError(error.message || \"Failed to get your location. Please enable location services.\");\r\n        }\r\n    };\r\n\r\n    // Proceed with Check In after location confirmation\r\n    const proceedWithCheckIn = async () => {\r\n        try {\r\n            setIsCheckingIn(true);\r\n            setActionError(null);\r\n            setShowLocationModal(false);\r\n\r\n            // Location already captured, just get device info\r\n            const deviceInfo = getDeviceInfo();\r\n\r\n            const payload = {\r\n                latitude: currentLocation.latitude,\r\n                longitude: currentLocation.longitude,\r\n                force_checkin: true, // Use force to ensure check-in happens\r\n                ...deviceInfo\r\n            };\r\n\r\n            await api.post(\"/my-attendance/check-in\", payload);\r\n            setSuccessMessage(\"Checked in successfully at your current location!\");\r\n            await fetchAttendance(); // Reload list\r\n        } catch (err) {\r\n            console.error(\"Check-in error:\", err);\r\n            setActionError(err?.message || err?.response?.data?.message || \"Failed to check in.\");\r\n        } finally {\r\n            setIsCheckingIn(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n        }\r\n    };\r\n\r\n    // Perform Check-Out - Current Session Only\r\n    const performCheckOut = async () => {\r\n        try {\r\n            setIsCheckingOut(true);\r\n            setShowLocationModal(false);\r\n            \r\n            const response = await api.post(\"/my-attendance/check-out\", {\r\n                check_out_latitude: currentLocation.latitude,\r\n                check_out_longitude: currentLocation.longitude,\r\n            });\r\n\r\n            setSuccessMessage(\"Successfully checked out! ðŸ‘‹\");\r\n            await fetchAttendance();\r\n        } catch (error) {\r\n            console.error(\"Checkout error:\", error);\r\n            \r\n            // Check if it's a time restriction error\r\n            if (error.response?.data?.error === 'checkout_restricted') {\r\n                setActionError(error.response.data.message || \"Checkout is not allowed after 9:00 PM. Please contact HR/Admin/SuperAdmin.\");\r\n            } else {\r\n                setActionError(error.response?.data?.message || \"Failed to check out. Please try again.\");\r\n            }\r\n        } finally {\r\n            setIsCheckingOut(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n        }\r\n    };\r\n\r\n    // Handle Start Overtime\r\n    const handleStartOvertime = async () => {\r\n        try {\r\n            setIsStartingOvertime(true);\r\n            setActionError(null);\r\n            \r\n            await api.post(\"/my-attendance/overtime/start\");\r\n            setSuccessMessage(\"Overtime started successfully!\");\r\n            await fetchAttendance();\r\n        } catch (err) {\r\n            console.error(\"Start overtime error:\", err);\r\n            setActionError(err?.response?.data?.message || \"Failed to start overtime. Please try again.\");\r\n        } finally {\r\n            setIsStartingOvertime(false);\r\n        }\r\n    };\r\n\r\n    // Handle End Overtime\r\n    const handleEndOvertime = async () => {\r\n        try {\r\n            setIsEndingOvertime(true);\r\n            setActionError(null);\r\n            \r\n            await api.post(\"/my-attendance/overtime/end\");\r\n            setSuccessMessage(\"Overtime ended successfully!\");\r\n            await fetchAttendance();\r\n        } catch (err) {\r\n            console.error(\"End overtime error:\", err);\r\n            setActionError(err?.response?.data?.message || \"Failed to end overtime. Please try again.\");\r\n        } finally {\r\n            setIsEndingOvertime(false);\r\n        }\r\n    };\r\n\r\n    // Determine today's status for button states\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n    const todayRecord = attendance.find(\r\n        (record) => new Date(record.date).toISOString().split(\"T\")[0] === today\r\n    );\r\n    const isCheckedInToday = !!todayRecord?.check_in;\r\n    const isCheckedOutToday = !!todayRecord?.check_out;\r\n    const hasStartedOvertime = !!todayRecord?.overtime_start;\r\n    const hasEndedOvertime = !!todayRecord?.overtime_end;\r\n\r\n    // Calculate Stats\r\n    const weeklyStats = calculateWeeklyStats(attendance);\r\n    const monthlyStats = calculateMonthlyStats(attendance, selectedMonth);\r\n\r\n    // Filter attendance for display based on selected month\r\n    const filteredAttendance = attendance.filter(record => record.date.startsWith(selectedMonth));\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-screen bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400 transition-colors\">\r\n                <div className=\"text-xl font-medium animate-pulse\">Loading attendance...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-[1200px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200\">\r\n\r\n            {/* Header & Actions */}\r\n            <div className=\"flex flex-col gap-6 mb-8\">\r\n                <div className=\"flex justify-between items-center flex-wrap gap-4\">\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">My Attendance</h1>\r\n\r\n                    <div className=\"flex gap-4 flex-wrap\">\r\n                        <Button\r\n                            onClick={handleCheckIn}\r\n                            disabled={isCheckingIn || isCheckedInToday}\r\n                            variant=\"success\"\r\n                        >\r\n                            {isCheckingIn ? \"Checking In...\" : isCheckedInToday ? \"Checked In\" : \"Check In\"}\r\n                        </Button>\r\n                        \r\n                        <Button\r\n                            onClick={handleCheckOut}\r\n                            disabled={isCheckingOut || !isCheckedInToday || isCheckedOutToday}\r\n                            variant=\"destructive\"\r\n                        >\r\n                            {isCheckingOut ? \"Checking Out...\" : isCheckedOutToday ? \"Checked Out\" : \"Check Out\"}\r\n                        </Button>\r\n\r\n                        {/* Overtime Buttons */}\r\n                        {isCheckedOutToday && !hasEndedOvertime && (\r\n                            <>\r\n                                <Button\r\n                                    onClick={handleStartOvertime}\r\n                                    disabled={isStartingOvertime || hasStartedOvertime}\r\n                                    variant=\"primary\"\r\n                                    className=\"bg-purple-600 hover:bg-purple-700\"\r\n                                >\r\n                                    {isStartingOvertime ? \"Starting...\" : hasStartedOvertime ? \"OT Started\" : \"Start Overtime\"}\r\n                                </Button>\r\n                                \r\n                                {hasStartedOvertime && (\r\n                                    <Button\r\n                                        onClick={handleEndOvertime}\r\n                                        disabled={isEndingOvertime}\r\n                                        variant=\"primary\"\r\n                                        className=\"bg-orange-600 hover:bg-orange-700\"\r\n                                    >\r\n                                        {isEndingOvertime ? \"Ending...\" : \"End Overtime\"}\r\n                                    </Button>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Messages */}\r\n                {actionError && (\r\n                    <Alert variant=\"error\">\r\n                        <strong>Error:</strong> {actionError}\r\n                    </Alert>\r\n                )}\r\n                {successMessage && (\r\n                    <Alert variant=\"success\">\r\n                        <strong>Success:</strong> {successMessage}\r\n                    </Alert>\r\n                )}\r\n                {error && (\r\n                    <Alert variant=\"error\">\r\n                        {error}\r\n                    </Alert>\r\n                )}\r\n            </div>\r\n\r\n            {/* Summaries Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n\r\n                {/* Weekly Summary */}\r\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200\">\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium uppercase tracking-wide\">This Week</div>\r\n                    <div className=\"flex items-baseline gap-2 mb-4\">\r\n                        <span className=\"text-3xl font-bold text-gray-900 dark:text-white\">{weeklyStats.formatted || \"0h 0m\"}</span>\r\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">worked</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4\">\r\n                        <span>Days: <strong className=\"text-gray-700 dark:text-gray-300\">{weeklyStats.daysWorked || 0}</strong></span>\r\n                        <span>Avg: <strong className=\"text-gray-700 dark:text-gray-300\">{weeklyStats.average || \"0h\"}</strong> / day</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Monthly Summary */}\r\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide\">Monthly Overview</div>\r\n                        <input\r\n                            type=\"month\"\r\n                            id=\"month-filter\"\r\n                            name=\"month-filter\"\r\n                            value={selectedMonth}\r\n                            onChange={(e) => setSelectedMonth(e.target.value)}\r\n                            className=\"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-sm px-3 py-1 rounded border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-baseline gap-2 mb-4\">\r\n                        <span className=\"text-3xl font-bold text-gray-900 dark:text-white\">{monthlyStats.formatted || \"0h 0m\"}</span>\r\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">worked</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4\">\r\n                        <span>Days: <strong className=\"text-gray-700 dark:text-gray-300\">{monthlyStats.daysWorked || 0}</strong></span>\r\n                        <span>Avg: <strong className=\"text-gray-700 dark:text-gray-300\">{monthlyStats.average || \"0h\"}</strong> / day</span>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Attendance List */}\r\n            <Card className=\"overflow-hidden\">\r\n                <CardHeader>\r\n                    <CardTitle>Attendance History ({new Date(selectedMonth + \"-01\").toLocaleString('default', { month: 'long', year: 'numeric' })})</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"p-0\">\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-left border-collapse\">\r\n                            <thead className=\"bg-gray-50 dark:bg-gray-700/50\">\r\n                                <tr>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Date</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Check In</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Check Out</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Hours</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Overtime</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Location</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Device</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Status</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Remarks</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                                {filteredAttendance.length > 0 ? (\r\n                                    filteredAttendance.map((record) => (\r\n                                        <tr key={record.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors\">\r\n                                            <td className=\"p-4 text-sm font-medium text-gray-900 dark:text-white\">\r\n                                                {new Date(record.date).toLocaleDateString(\"en-US\", {\r\n                                                    weekday: 'short', year: 'numeric', month: 'short', day: 'numeric'\r\n                                                })}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm text-gray-700 dark:text-gray-300\">\r\n                                                <div className=\"flex flex-col\">\r\n                                                    <span>{record.check_in ? formatTime(record.check_in, record.date) : \"--:--\"}</span>\r\n                                                    {record.check_in_latitude && record.check_in_longitude && (\r\n                                                        <a \r\n                                                            href={`https://www.google.com/maps?q=${record.check_in_latitude},${record.check_in_longitude}`}\r\n                                                            target=\"_blank\"\r\n                                                            rel=\"noopener noreferrer\"\r\n                                                            className=\"text-xs text-blue-600 hover:underline mt-1\"\r\n                                                            onClick={(e) => e.stopPropagation()}\r\n                                                        >\r\n                                                            ðŸ“ View\r\n                                                        </a>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm text-gray-700 dark:text-gray-300\">\r\n                                                <div className=\"flex flex-col\">\r\n                                                    <span>{record.check_out ? formatTime(record.check_out, record.date) : \"--:--\"}</span>\r\n                                                    {record.check_out_latitude && record.check_out_longitude && (\r\n                                                        <a \r\n                                                            href={`https://www.google.com/maps?q=${record.check_out_latitude},${record.check_out_longitude}`}\r\n                                                            target=\"_blank\"\r\n                                                            rel=\"noopener noreferrer\"\r\n                                                            className=\"text-xs text-blue-600 hover:underline mt-1\"\r\n                                                            onClick={(e) => e.stopPropagation()}\r\n                                                        >\r\n                                                            ðŸ“ View\r\n                                                        </a>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm font-semibold text-indigo-600 dark:text-indigo-400\">\r\n                                                {calculateHours(record.check_in, record.check_out)}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm\">\r\n                                                {record.overtime_start ? (\r\n                                                    <div className=\"flex flex-col gap-1\">\r\n                                                        <span className=\"text-xs font-medium text-purple-600 dark:text-purple-400\">\r\n                                                            Start: {formatTime(record.overtime_start, record.date)}\r\n                                                        </span>\r\n                                                        {record.overtime_end ? (\r\n                                                            <>\r\n                                                                <span className=\"text-xs font-medium text-orange-600 dark:text-orange-400\">\r\n                                                                    End: {formatTime(record.overtime_end, record.date)}\r\n                                                                </span>\r\n                                                                <span className=\"text-xs font-bold text-green-600 dark:text-green-400\">\r\n                                                                    {record.overtime_hours}h OT\r\n                                                                </span>\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            <span className=\"text-xs text-amber-600 dark:text-amber-400\">\r\n                                                                â³ In Progress\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-gray-400 text-xs\">--</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-xs text-gray-600 dark:text-gray-400\">\r\n                                                {record.check_in_latitude && record.check_in_longitude ? (\r\n                                                    <div className=\"flex flex-col gap-1\">\r\n                                                        <span className=\"font-medium\">In: {Number(record.check_in_latitude).toFixed(4)}, {Number(record.check_in_longitude).toFixed(4)}</span>\r\n                                                        {record.check_out_latitude && record.check_out_longitude && (\r\n                                                            <span className=\"font-medium\">Out: {Number(record.check_out_latitude).toFixed(4)}, {Number(record.check_out_longitude).toFixed(4)}</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-gray-400\">--</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-xs text-gray-600 dark:text-gray-400\">\r\n                                                {record.device_id ? (\r\n                                                    <div className=\"flex flex-col gap-1\">\r\n                                                        <span className=\"font-medium\">{record.device_type || 'Unknown'}</span>\r\n                                                        <span className=\"text-gray-500 dark:text-gray-500 truncate max-w-[120px]\" title={String(record.device_id)}>\r\n                                                            ID: {String(record.device_id).substring(0, 12)}...\r\n                                                        </span>\r\n                                                        {record.browser && (\r\n                                                            <span className=\"text-gray-500 dark:text-gray-500\">{record.browser}</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-gray-400\">--</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm\">\r\n                                                <Badge variant={record.status}>\r\n                                                    {record.status}\r\n                                                </Badge>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-xs text-gray-600 dark:text-gray-400\">\r\n                                                <div className=\"flex flex-col gap-1\">\r\n                                                    <span className=\"font-medium text-green-600 dark:text-green-400\">\r\n                                                        âœ“ Checked in by {record.checked_in_by || 'self'}\r\n                                                    </span>\r\n                                                    {record.check_out && (\r\n                                                        <span className=\"font-medium text-purple-600 dark:text-purple-400\">\r\n                                                            âœ“ Checked out by {record.checked_out_by || 'self'}\r\n                                                        </span>\r\n                                                    )}\r\n                                                    {!record.check_out && (\r\n                                                        <span className=\"text-amber-600 dark:text-amber-400\">\r\n                                                            â³ Pending checkout\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                ) : (\r\n                                    <tr>\r\n                                        <td colSpan=\"9\" className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n                                            No attendance records found for this month.\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Location Permission Modal */}\r\n            {showLocationModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full\">\r\n                        <div className=\"p-5 border-b border-gray-200 dark:border-gray-700\">\r\n                            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                                ðŸ“ Location Required\r\n                            </h3>\r\n                            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                                Confirm your location for attendance tracking\r\n                            </p>\r\n                        </div>\r\n                        \r\n                        <div className=\"p-5 space-y-4\">\r\n                            {/* Map Preview */}\r\n                            {currentLocation && (\r\n                                <div className=\"space-y-2\">\r\n                                    <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">\r\n                                        Your Current Location:\r\n                                    </p>\r\n                                    <div className=\"h-48 rounded-lg overflow-hidden border border-gray-300 dark:border-gray-600\">\r\n                                        <MapContainer \r\n                                            center={[currentLocation.latitude, currentLocation.longitude]} \r\n                                            zoom={15} \r\n                                            style={{ height: '100%', width: '100%' }}\r\n                                            scrollWheelZoom={false}\r\n                                        >\r\n                                            <TileLayer\r\n                                                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n                                                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                                            />\r\n                                            <Marker position={[currentLocation.latitude, currentLocation.longitude]}>\r\n                                                <Popup>\r\n                                                    Your Location<br />\r\n                                                    Lat: {currentLocation.latitude.toFixed(6)}<br />\r\n                                                    Lng: {currentLocation.longitude.toFixed(6)}\r\n                                                </Popup>\r\n                                            </Marker>\r\n                                        </MapContainer>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                        ðŸ“Œ {currentLocation.latitude.toFixed(6)}, {currentLocation.longitude.toFixed(6)}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Info Box */}\r\n                            <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\r\n                                <p className=\"text-xs text-blue-800 dark:text-blue-300\">\r\n                                    <strong>â„¹ï¸ Note:</strong> Your location is captured only during check-in/check-out for attendance verification.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={() => {\r\n                                    setShowLocationModal(false);\r\n                                    setPendingAction(null);\r\n                                    setCurrentLocation(null);\r\n                                    setIsCheckingIn(false);\r\n                                    setIsCheckingOut(false);\r\n                                }}\r\n                                disabled={isCheckingIn || isCheckingOut}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                variant={pendingAction === 'check-out' ? 'destructive' : 'success'}\r\n                                onClick={pendingAction === 'check-out' ? performCheckOut : proceedWithCheckIn}\r\n                                disabled={isCheckingIn || isCheckingOut}\r\n                            >\r\n                                {isCheckingIn || isCheckingOut \r\n                                    ? 'Processing...' \r\n                                    : pendingAction === 'check-out' \r\n                                        ? 'Confirm Check Out' \r\n                                        : 'Confirm Check In'}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Pending Checkouts Modal */}\r\n            {showPendingCheckoutsModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\r\n                        <div className=\"p-5 border-b border-gray-200 dark:border-gray-700\">\r\n                            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                                âš ï¸ Pending Check-Outs Detected\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\r\n                                You have {pendingCheckouts.length} session{pendingCheckouts.length > 1 ? 's' : ''} without check-out. Contact HR/Admin for checkout or proceed with new check-in.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"p-5\">\r\n                            <div className=\"space-y-3\">\r\n                                {pendingCheckouts.map((session) => (\r\n                                    <div\r\n                                        key={session.id}\r\n                                        className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600\"\r\n                                    >\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div>\r\n                                                <div className=\"text-sm font-semibold text-gray-900 dark:text-white\">\r\n                                                    ðŸ“… {new Date(session.date).toLocaleDateString('en-US', { \r\n                                                        weekday: 'long', \r\n                                                        year: 'numeric', \r\n                                                        month: 'long', \r\n                                                        day: 'numeric' \r\n                                                    })}\r\n                                                </div>\r\n                                                <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                                                    Check-in: <span className=\"font-medium text-green-600 dark:text-green-400\">{session.check_in}</span>\r\n                                                </div>\r\n                                                {session.check_in_latitude && session.check_in_longitude && (\r\n                                                    <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                                                        ðŸ“ {Number(session.check_in_latitude).toFixed(4)}, {Number(session.check_in_longitude).toFixed(4)}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <Badge variant=\"warning\">Pending</Badge>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Info Box */}\r\n                            <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mt-4\">\r\n                                <p className=\"text-xs text-amber-800 dark:text-amber-300\">\r\n                                    <strong>â„¹ï¸ Note:</strong> Employees cannot check themselves out. Please contact HR or Admin to complete these checkouts, or proceed with a new check-in. Unchecked sessions will be automatically checked out at midnight.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={closePendingCheckoutsModal}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                variant=\"success\"\r\n                                onClick={skipPendingCheckoutsAndCheckIn}\r\n                            >\r\n                                Proceed with Check In\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Face Enrollment Modal */}\r\n            {showFaceEnrollmentModal && (\r\n                <FaceEnrollment\r\n                    email={user?.email}\r\n                    onFaceEnrolled={async (descriptor, imageBlob) => {\r\n                        console.log(\"âœ… Face enrolled successfully, proceeding with check-in...\");\r\n                        try {\r\n                            // Send face data to backend\r\n                            const faceData = new FormData();\r\n                            faceData.append('face_descriptor', JSON.stringify(descriptor));\r\n                            faceData.append('face_image', imageBlob, 'face.jpg');\r\n                            \r\n                            const response = await api.post('/auth/enroll-face', faceData, {\r\n                                headers: { \"Content-Type\": \"multipart/form-data\" }\r\n                            });\r\n                            \r\n                            setShowFaceEnrollmentModal(false);\r\n                            setNeedsFaceEnrollment(false);\r\n                            \r\n                            // Refresh user data from backend to get updated face_descriptor\r\n                            const token = localStorage.getItem('token');\r\n                            if (token && refreshUser) {\r\n                                await refreshUser(token);\r\n                            }\r\n                            \r\n                            setSuccessMessage(\"Face enrolled successfully! Proceeding with check-in...\");\r\n                            \r\n                            // Automatically retry check-in after enrollment\r\n                            setTimeout(() => {\r\n                                handleCheckIn();\r\n                            }, 1000);\r\n                        } catch (err) {\r\n                            console.error(\"Failed to enroll face:\", err);\r\n                            setActionError(err.response?.data?.message || \"Failed to enroll face. Please try again.\");\r\n                            setShowFaceEnrollmentModal(false);\r\n                        }\r\n                    }}\r\n                    onClose={() => {\r\n                        setShowFaceEnrollmentModal(false);\r\n                        setNeedsFaceEnrollment(false);\r\n                        setActionError(\"Face enrollment is required to check in.\");\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AttendancePage;\r\n"],"names":["L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Card","_ref","children","className","_jsx","concat","CardHeader","_ref2","CardContent","_ref3","CardTitle","_ref4","Button","_ref5","onClick","disabled","variant","primary","success","outline","destructive","Alert","_ref6","Badge","_ref7","styles","default","danger","warning","Present","Absent","Late","current","AttendancePage","user","refreshUser","useAuth","attendance","setAttendance","useState","isLoading","setIsLoading","error","setError","actionError","setActionError","successMessage","setSuccessMessage","isCheckingIn","setIsCheckingIn","isCheckingOut","setIsCheckingOut","currentLocation","setCurrentLocation","showLocationModal","setShowLocationModal","pendingAction","setPendingAction","showPendingCheckoutsModal","setShowPendingCheckoutsModal","pendingCheckouts","setPendingCheckouts","isStartingOvertime","setIsStartingOvertime","isEndingOvertime","setIsEndingOvertime","showFaceEnrollmentModal","setShowFaceEnrollmentModal","needsFaceEnrollment","setNeedsFaceEnrollment","isSecureContext","window","selectedMonth","setSelectedMonth","Date","toISOString","slice","fetchAttendance","async","response","api","get","data","Array","isArray","err","console","useEffect","timer","setTimeout","clearTimeout","document","body","style","overflow","getLocation","Promise","resolve","reject","_navigator$permission","log","navigator","geolocation","Error","permissions","query","name","then","status","state","catch","e","getCurrentPosition","position","coords","location","latitude","longitude","code","message","errorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","timeout","enableHighAccuracy","maximumAge","getDeviceInfo","ua","userAgent","deviceType","test","browser","indexOf","deviceId","localStorage","getItem","now","Math","random","toString","substr","setItem","device_id","device_type","handleCheckIn","today","split","todayRecord","find","record","date","check_in","face_descriptor","confirm","checkResponse","post","_objectSpread","requires_action","pending_checkouts","_err$response","_err$response2","_err$response2$data","isCheckedInToday","isCheckedOutToday","check_out","hasStartedOvertime","overtime_start","hasEndedOvertime","overtime_end","weeklyStats","calculateWeeklyStats","monthlyStats","calculateMonthlyStats","filteredAttendance","filter","startsWith","_jsxs","_Fragment","_err$response5","_err$response5$data","_err$response6","_err$response6$data","formatted","daysWorked","average","type","id","value","onChange","target","toLocaleString","month","year","length","map","toLocaleDateString","weekday","day","formatTime","check_in_latitude","check_in_longitude","href","rel","stopPropagation","check_out_latitude","check_out_longitude","calculateHours","overtime_hours","Number","toFixed","title","String","substring","checked_in_by","checked_out_by","colSpan","MapContainer","center","zoom","height","width","scrollWheelZoom","TileLayer","attribution","url","Marker","Popup","_error$response","_error$response$data","_error$response2","_error$response2$data","deviceInfo","payload","force_checkin","_err$response4","_err$response4$data","session","closePendingCheckoutsModal","_err$response3","_err$response3$data","FaceEnrollment","email","onFaceEnrolled","descriptor","imageBlob","faceData","FormData","append","JSON","stringify","headers","token","_err$response7","_err$response7$data","onClose"],"sourceRoot":""}