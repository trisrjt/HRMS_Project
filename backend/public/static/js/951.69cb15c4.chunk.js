"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[951],{8951:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(5043),s=a(1321),d=a(579);const l=()=>{var e;const[t,a]=(0,r.useState)("members"),[l,i]=(0,r.useState)(!1),[n,x]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[o,g]=(0,r.useState)([]),[y,p]=(0,r.useState)(""),[h,u]=(0,r.useState)((new Date).toISOString().split("T")[0]),[k,b]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[w,v]=(0,r.useState)(!1),[N,S]=(0,r.useState)(null),[_,C]=(0,r.useState)([]),[D,A]=(0,r.useState)((new Date).toISOString().slice(0,7)),[E,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{I(),"attendance"===t&&k&&O(k,D)},[t,h,k,f,D]);const I=async()=>{i(!0);try{if("members"===t){const e=await s.A.get("/my-team");x(e.data)}else if("attendance"===t)if(k)m([]);else{const e=await s.A.get("/my-team/attendance?date=".concat(h));m(e.data.data||[])}else if("leaves"===t){let e="/my-team/leaves";f&&(e+="?employee_id=".concat(f));const t=await s.A.get(e);g(t.data.data||[])}}catch(e){console.error("Error fetching team data",e)}finally{i(!1)}},O=async(e,t)=>{F(!0);try{const a=await s.A.get("/attendance/employee/".concat(e,"?month=").concat(t));C(a.data)}catch(a){console.error("Error fetching history",a),C([])}finally{F(!1)}};return(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"My Team"}),(0,d.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6",children:["members","attendance","leaves"].map(e=>(0,d.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 font-medium capitalize focus:outline-none ".concat(t===e?"text-blue-600 border-b-2 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:e},e))}),l?(0,d.jsx)("div",{className:"text-center py-10 dark:text-gray-400",children:"Loading..."}):(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:["members"===t&&(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Employee"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Department"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Designation"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n&&n.length>0?n.map(e=>{var t,a,r,s;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsxs)("div",{className:"ml-0",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:null===(t=e.user)||void 0===t?void 0:t.name}),(0,d.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(null===(a=e.department)||void 0===a?void 0:a.name)||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(null===(r=e.designation)||void 0===r?void 0:r.name)||e.designation||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:null===(s=e.user)||void 0===s?void 0:s.email})]},e.id)}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No team members found."})})})]})}),"attendance"===t&&(0,d.jsxs)("div",{className:"overflow-x-auto",children:[(0,d.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-wrap gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"attendance-filter-employee",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Employee"}),(0,d.jsxs)("select",{id:"attendance-filter-employee",name:"attendance_filter_employee",value:k,onChange:e=>b(e.target.value),className:"px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",children:[(0,d.jsx)("option",{value:"",children:"All Employees (Daily View)"}),n.map(e=>{var t;return(0,d.jsx)("option",{value:e.id,children:null===(t=e.user)||void 0===t?void 0:t.name},e.id)})]})]}),(0,d.jsx)("div",{children:k?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("label",{htmlFor:"history-month",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Month"}),(0,d.jsx)("input",{id:"history-month",name:"history_month",type:"month",value:D,onChange:e=>A(e.target.value),className:"px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("label",{htmlFor:"attendance-date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Date"}),(0,d.jsx)("input",{id:"attendance-date",name:"attendance_date",type:"date",value:h,onChange:e=>u(e.target.value),className:"px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]})})]}),k?(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Check In"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Check Out"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Hrs"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:E?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center",children:"Loading history..."})}):_&&_.length>0?_.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.date}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.check_in||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.check_out||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.total_hours}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                                                            ".concat("Present"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"Weekend"===e.status?"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:e.status})})]},e.id)):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No history found for this month."})})})]}):(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Employee"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Check In"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Check Out"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c&&c.length>0?c.map(e=>{var t,a;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:null===(t=e.employee)||void 0===t||null===(a=t.user)||void 0===a?void 0:a.name}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.date||h}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.check_in}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.check_out}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                                                            ".concat("Present"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"Absent"===e.status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"),children:e.status})})]},e.id)}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No attendance records found."})})})]})]}),"leaves"===t&&(0,d.jsxs)("div",{className:"overflow-x-auto",children:[(0,d.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:(0,d.jsx)("div",{className:"flex items-center gap-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"leave-filter-employee",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Employee ID"}),(0,d.jsxs)("select",{id:"leave-filter-employee",name:"leave_filter_employee",value:f,onChange:e=>j(e.target.value),className:"px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",children:[(0,d.jsx)("option",{value:"",children:"All Employees"}),n.map(e=>{var t;return(0,d.jsx)("option",{value:e.id,children:null===(t=e.user)||void 0===t?void 0:t.name},e.id)})]})]})})}),(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Employee"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Leave Type"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dates"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Reason"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Approved By"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o&&o.length>0?o.map(e=>{var t,a,r;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:null===(t=e.employee)||void 0===t||null===(a=t.user)||void 0===a?void 0:a.name}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:null===(r=e.leave_type)||void 0===r?void 0:r.name}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.start_date," to ",e.end_date]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",title:e.reason,children:e.reason||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.approver?e.approver.name:"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                                                        ".concat("Approved"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"Rejected"===e.status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"),children:e.status})})]},e.id)}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No leave requests found."})})})]})]})]}),w&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:(0,d.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>v(!1)}),(0,d.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,d.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:[(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,d.jsx)("div",{className:"sm:flex sm:items-start",children:(0,d.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,d.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",id:"modal-title",children:["Attendance History: ",null===N||void 0===N||null===(e=N.user)||void 0===e?void 0:e.name]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("label",{htmlFor:"modal-history-month",className:"sr-only",children:"Select Month"}),(0,d.jsx)("input",{id:"modal-history-month",name:"modal_history_month",type:"month",value:D,onChange:e=>{A(e.target.value),O(N.id,e.target.value)},className:"px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"})]}),E?(0,d.jsx)("div",{className:"text-center py-4",children:"Loading..."}):(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Check In"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Check Out"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Hrs"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,d.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700 max-h-96 overflow-y-auto block",children:_.map(e=>(0,d.jsxs)("tr",{className:"table-row w-full display-table",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.date}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.check_in||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.check_out||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.total_hours}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                                                                        ".concat("Present"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"Weekend"===e.status?"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:e.status})})]},e.id))})]})]})]})})}),(0,d.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:(0,d.jsx)("button",{type:"button",onClick:()=>v(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-gray-100 dark:border-gray-500 dark:hover:bg-gray-500",children:"Close"})})]})]})})]})}}}]);
//# sourceMappingURL=951.69cb15c4.chunk.js.map