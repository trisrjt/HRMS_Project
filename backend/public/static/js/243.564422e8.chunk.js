"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[243],{1243:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(9379),l=a(5043),s=a(9778),d=a(579);const i=()=>{const[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!0),[o,c]=(0,l.useState)(null),[n,m]=(0,l.useState)({}),[x,g]=(0,l.useState)(!1),[u,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{y()},[]);const y=async()=>{i(!0);try{const e=await s.A.get("/email-preferences");t(e.data)}catch(e){console.error("Failed to fetch preferences",e)}finally{i(!1)}};return a?(0,d.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading settings..."}):(0,d.jsxs)("div",{className:"p-8 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Email Settings"}),(0,d.jsx)("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:"Customize your email templates for each leave type. These emails will be automatically sent when you apply for leave."}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 flex flex-col justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.leave_type_name}),e.has_custom_template?(0,d.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Customized"}):(0,d.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-full",children:"Default"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Subject"}),(0,d.jsx)("p",{className:"text-sm text-gray-800 dark:text-gray-300 truncate",children:e.subject_template})]})]}),(0,d.jsx)("button",{onClick:()=>(e=>{c(e),m({to_emails:e.to_emails||"",cc_emails:e.cc_emails||"",bcc_emails:e.bcc_emails||"",subject_template:e.subject_template,body_template:e.body_template}),b(null)})(e),className:"w-full py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:"Edit Template"})]},e.leave_type_id))}),o&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-2xl shadow-xl flex flex-col max-h-[90vh]",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,d.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Edit ",o.leave_type_name," Template"]}),(0,d.jsx)("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"\u2715"})]}),(0,d.jsx)("div",{className:"p-6 overflow-y-auto",children:(0,d.jsxs)("form",{id:"templateForm",onSubmit:async e=>{if(e.preventDefault(),o){g(!0);try{await s.A.post("/email-preferences",(0,r.A)({leave_type_id:o.leave_type_id},n)),b({type:"success",text:"Template saved successfully!"}),y(),c(null)}catch(t){console.error("Failed to save",t),b({type:"error",text:"Failed to save template."})}finally{g(!1)}}},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Emails (comma separated)"}),(0,d.jsx)("input",{type:"text",value:n.to_emails,onChange:e=>m((0,r.A)((0,r.A)({},n),{},{to_emails:e.target.value})),placeholder:"manager@example.com (Manager is added automatically)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1 mb-3",children:"Your reporting manager is automatically included. Add others here."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"CC Emails (comma separated)"}),(0,d.jsx)("input",{type:"text",value:n.cc_emails,onChange:e=>m((0,r.A)((0,r.A)({},n),{},{cc_emails:e.target.value})),placeholder:"hr@example.com, lead@example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"BCC Emails (comma separated)"}),(0,d.jsx)("input",{type:"text",value:n.bcc_emails,onChange:e=>m((0,r.A)((0,r.A)({},n),{},{bcc_emails:e.target.value})),placeholder:"hidden@example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Template *"}),(0,d.jsx)("input",{type:"text",required:!0,value:n.subject_template,onChange:e=>m((0,r.A)((0,r.A)({},n),{},{subject_template:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm font-medium"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Body Template *"}),(0,d.jsx)("textarea",{required:!0,rows:"8",value:n.body_template,onChange:e=>m((0,r.A)((0,r.A)({},n),{},{body_template:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm font-mono"})]})]})}),(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[(0,d.jsx)("button",{type:"button",onClick:()=>c(null),className:"px-4 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",form:"templateForm",disabled:x,className:"px-4 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:x?"Saving...":"Save Template"})]})]})})]})}}}]);
//# sourceMappingURL=243.564422e8.chunk.js.map