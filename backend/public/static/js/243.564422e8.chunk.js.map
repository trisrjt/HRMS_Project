{"version":3,"file":"static/js/243.564422e8.chunk.js","mappings":"wLAGA,MAqLA,EArL0BA,KACtB,MAAOC,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,KACxCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAcC,IAAmBJ,EAAAA,EAAAA,UAAS,OAC1CK,EAAUC,IAAeN,EAAAA,EAAAA,UAAS,CAAC,IACnCO,EAAcC,IAAmBR,EAAAA,EAAAA,WAAS,IAC1CS,EAASC,IAAcV,EAAAA,EAAAA,UAAS,OAEvCW,EAAAA,EAAAA,WAAU,KACNC,KACD,IAEH,MAAMA,EAAmBC,UACrBX,GAAW,GACX,IACI,MAAMY,QAAiBC,EAAAA,EAAIC,IAAI,sBAC/BjB,EAAee,EAASG,KAC5B,CAAE,MAAOC,GACLC,QAAQD,MAAM,8BAA+BA,EACjD,CAAC,QACGhB,GAAW,EACf,GAsCJ,OAAID,GAAgBmB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gCAA+BC,SAAC,yBAG/DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+CAA8CC,SAAA,EACzDF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,wDAAuDC,SAAC,oBAEtEF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wCAAuCC,SAAC,2HAIrDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uDAAsDC,SAChExB,EAAY0B,IAAIC,IACbF,EAAAA,EAAAA,MAAA,OAA8BF,UAAU,+HAA8HC,SAAA,EAClKC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EAClDF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kDAAiDC,SAAEG,EAAKC,kBACrED,EAAKE,qBACFP,EAAAA,EAAAA,KAAA,QAAMC,UAAU,6DAA4DC,SAAC,gBAE7EF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,2DAA0DC,SAAC,gBAGnFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACjBF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,gDAA+CC,SAAC,aAC7DF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,oDAAmDC,SAAEG,EAAKG,0BAG/ER,EAAAA,EAAAA,KAAA,UACIS,QAASA,IA/DbJ,KAChBrB,EAAgBqB,GAChBnB,EAAY,CACRwB,UAAWL,EAAKK,WAAa,GAC7BC,UAAWN,EAAKM,WAAa,GAC7BC,WAAYP,EAAKO,YAAc,GAC/BJ,iBAAkBH,EAAKG,iBACvBK,cAAeR,EAAKQ,gBAExBvB,EAAW,OAsDwBwB,CAAWT,GAC1BJ,UAAU,qKAAoKC,SACjL,oBAlBKG,EAAKU,kBA0BtBhC,IACGiB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sEAAqEC,UAChFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6FAA4FC,SAAA,EACvGC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4FAA2FC,SAAA,EACtGC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,kDAAiDC,SAAA,CAAC,QAAMnB,EAAauB,gBAAgB,gBACnGN,EAAAA,EAAAA,KAAA,UAAQS,QAASA,IAAMzB,EAAgB,MAAOiB,UAAU,gFAA+EC,SAAC,eAK5IF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sBAAqBC,UAChCC,EAAAA,EAAAA,MAAA,QAAMa,GAAG,eAAeC,SAxE7BxB,UAEf,GADAyB,EAAEC,iBACGpC,EAAL,CAEAK,GAAgB,GAChB,UACUO,EAAAA,EAAIyB,KAAK,sBAAoBC,EAAAA,EAAAA,GAAA,CAC/BN,cAAehC,EAAagC,eACzB9B,IAEPK,EAAW,CAAEgC,KAAM,UAAWC,KAAM,iCAGpC/B,IACAR,EAAgB,KACpB,CAAE,MAAOc,GACLC,QAAQD,MAAM,iBAAkBA,GAChCR,EAAW,CAAEgC,KAAM,QAASC,KAAM,4BACtC,CAAC,QACGnC,GAAgB,EACpB,CAlByB,GAsEyCa,UAAU,YAAWC,SAAA,EAC/DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EAClDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,kEAAiEC,SAAC,iCACnFF,EAAAA,EAAAA,KAAA,SACIsB,KAAK,OACLE,MAAOvC,EAASyB,UAChBe,SAAUP,GAAKhC,GAAWmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIpC,GAAQ,IAAEyB,UAAWQ,EAAEQ,OAAOF,SAC9DG,YAAY,uDACZ1B,UAAU,2LAEdD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,kCAAiCC,SAAC,2EAEnDC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,kEAAiEC,SAAC,iCACnFF,EAAAA,EAAAA,KAAA,SACIsB,KAAK,OACLE,MAAOvC,EAAS0B,UAChBc,SAAUP,GAAKhC,GAAWmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIpC,GAAQ,IAAE0B,UAAWO,EAAEQ,OAAOF,SAC9DG,YAAY,mCACZ1B,UAAU,8LAGlBE,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,kEAAiEC,SAAC,kCACnFF,EAAAA,EAAAA,KAAA,SACIsB,KAAK,OACLE,MAAOvC,EAAS2B,WAChBa,SAAUP,GAAKhC,GAAWmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIpC,GAAQ,IAAE2B,WAAYM,EAAEQ,OAAOF,SAC/DG,YAAY,qBACZ1B,UAAU,iMAKtBE,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,kEAAiEC,SAAC,wBACnFF,EAAAA,EAAAA,KAAA,SACIsB,KAAK,OACLM,UAAQ,EACRJ,MAAOvC,EAASuB,iBAChBiB,SAAUP,GAAKhC,GAAWmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIpC,GAAQ,IAAEuB,iBAAkBU,EAAEQ,OAAOF,SACrEvB,UAAU,0MAIlBE,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,kEAAiEC,SAAC,qBACnFF,EAAAA,EAAAA,KAAA,YACI4B,UAAQ,EACRC,KAAK,IACLL,MAAOvC,EAAS4B,cAChBY,SAAUP,GAAKhC,GAAWmC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIpC,GAAQ,IAAE4B,cAAeK,EAAEQ,OAAOF,SAClEvB,UAAU,6MAO1BE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iFAAgFC,SAAA,EAC3FF,EAAAA,EAAAA,KAAA,UAAQsB,KAAK,SAASb,QAASA,IAAMzB,EAAgB,MAAOiB,UAAU,0LAAyLC,SAAC,YAChQF,EAAAA,EAAAA,KAAA,UAAQsB,KAAK,SAASQ,KAAK,eAAeC,SAAU5C,EAAcc,UAAU,wGAAuGC,SAC9Kf,EAAe,YAAc,6B","sources":["pages/employees/EmailSettingsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/axios';\r\n\r\nconst EmailSettingsPage = () => {\r\n    const [preferences, setPreferences] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedType, setSelectedType] = useState(null); // For modal/editing\r\n    const [formData, setFormData] = useState({});\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [message, setMessage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        fetchPreferences();\r\n    }, []);\r\n\r\n    const fetchPreferences = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await api.get('/email-preferences');\r\n            setPreferences(response.data);\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch preferences\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (pref) => {\r\n        setSelectedType(pref);\r\n        setFormData({\r\n            to_emails: pref.to_emails || '',\r\n            cc_emails: pref.cc_emails || '',\r\n            bcc_emails: pref.bcc_emails || '',\r\n            subject_template: pref.subject_template,\r\n            body_template: pref.body_template,\r\n        });\r\n        setMessage(null);\r\n    };\r\n\r\n    const handleSave = async (e) => {\r\n        e.preventDefault();\r\n        if (!selectedType) return;\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await api.post('/email-preferences', {\r\n                leave_type_id: selectedType.leave_type_id,\r\n                ...formData\r\n            });\r\n            setMessage({ type: 'success', text: 'Template saved successfully!' });\r\n\r\n            // Refresh list\r\n            fetchPreferences();\r\n            setSelectedType(null); // Close modal\r\n        } catch (error) {\r\n            console.error(\"Failed to save\", error);\r\n            setMessage({ type: 'error', text: 'Failed to save template.' });\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"p-8 text-center text-gray-500\">Loading settings...</div>;\r\n\r\n    return (\r\n        <div className=\"p-8 bg-gray-50 dark:bg-gray-900 min-h-screen\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Email Settings</h1>\r\n\r\n            <p className=\"mb-6 text-gray-600 dark:text-gray-400\">\r\n                Customize your email templates for each leave type. These emails will be automatically sent when you apply for leave.\r\n            </p>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {preferences.map(pref => (\r\n                    <div key={pref.leave_type_id} className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 flex flex-col justify-between\">\r\n                        <div>\r\n                            <div className=\"flex justify-between items-start mb-4\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">{pref.leave_type_name}</h3>\r\n                                {pref.has_custom_template ? (\r\n                                    <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">Customized</span>\r\n                                ) : (\r\n                                    <span className=\"px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-full\">Default</span>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"mb-4\">\r\n                                <p className=\"text-xs font-semibold text-gray-500 uppercase\">Subject</p>\r\n                                <p className=\"text-sm text-gray-800 dark:text-gray-300 truncate\">{pref.subject_template}</p>\r\n                            </div>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => handleEdit(pref)}\r\n                            className=\"w-full py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors\"\r\n                        >\r\n                            Edit Template\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Edit Modal */}\r\n            {selectedType && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl w-full max-w-2xl shadow-xl flex flex-col max-h-[90vh]\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\r\n                            <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">Edit {selectedType.leave_type_name} Template</h2>\r\n                            <button onClick={() => setSelectedType(null)} className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\">\r\n                                âœ•\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 overflow-y-auto\">\r\n                            <form id=\"templateForm\" onSubmit={handleSave} className=\"space-y-4\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    <div className=\"md:col-span-2\">\r\n                                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">To Emails (comma separated)</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={formData.to_emails}\r\n                                            onChange={e => setFormData({ ...formData, to_emails: e.target.value })}\r\n                                            placeholder=\"manager@example.com (Manager is added automatically)\"\r\n                                            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm\"\r\n                                        />\r\n                                        <p className=\"text-xs text-gray-500 mt-1 mb-3\">Your reporting manager is automatically included. Add others here.</p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">CC Emails (comma separated)</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={formData.cc_emails}\r\n                                            onChange={e => setFormData({ ...formData, cc_emails: e.target.value })}\r\n                                            placeholder=\"hr@example.com, lead@example.com\"\r\n                                            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">BCC Emails (comma separated)</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={formData.bcc_emails}\r\n                                            onChange={e => setFormData({ ...formData, bcc_emails: e.target.value })}\r\n                                            placeholder=\"hidden@example.com\"\r\n                                            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Subject Template *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        value={formData.subject_template}\r\n                                        onChange={e => setFormData({ ...formData, subject_template: e.target.value })}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm font-medium\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Body Template *</label>\r\n                                    <textarea\r\n                                        required\r\n                                        rows=\"8\"\r\n                                        value={formData.body_template}\r\n                                        onChange={e => setFormData({ ...formData, body_template: e.target.value })}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-sm font-mono\"\r\n                                    ></textarea>\r\n                                </div>\r\n\r\n                                {/* Variables section removed as requested */}\r\n                            </form>\r\n                        </div>\r\n                        <div className=\"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3\">\r\n                            <button type=\"button\" onClick={() => setSelectedType(null)} className=\"px-4 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600\">Cancel</button>\r\n                            <button type=\"submit\" form=\"templateForm\" disabled={isSubmitting} className=\"px-4 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50\">\r\n                                {isSubmitting ? 'Saving...' : 'Save Template'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EmailSettingsPage;\r\n"],"names":["EmailSettingsPage","preferences","setPreferences","useState","loading","setLoading","selectedType","setSelectedType","formData","setFormData","isSubmitting","setIsSubmitting","message","setMessage","useEffect","fetchPreferences","async","response","api","get","data","error","console","_jsx","className","children","_jsxs","map","pref","leave_type_name","has_custom_template","subject_template","onClick","to_emails","cc_emails","bcc_emails","body_template","handleEdit","leave_type_id","id","onSubmit","e","preventDefault","post","_objectSpread","type","text","value","onChange","target","placeholder","required","rows","form","disabled"],"sourceRoot":""}