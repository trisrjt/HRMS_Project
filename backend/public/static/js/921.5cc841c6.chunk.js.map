{"version":3,"file":"static/js/921.5cc841c6.chunk.js","mappings":"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","sources":["pages/employees/AttendancePage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport api from \"../../api/axios\";\r\nimport { formatTime, calculateHours, calculateWeeklyStats, calculateMonthlyStats } from \"../../utils/dateUtils\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix default marker icon issue in Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\n// --- UI Components ---\r\n\r\nconst Card = ({ children, className }) => (\r\n    <div className={`bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200 ${className}`}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CardHeader = ({ children }) => (\r\n    <div className=\"p-6 border-b border-gray-100 dark:border-gray-700\">\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CardContent = ({ children, className }) => (\r\n    <div className={`p-6 ${className}`}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst CardTitle = ({ children }) => (\r\n    <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white m-0\">\r\n        {children}\r\n    </h2>\r\n);\r\n\r\nconst Button = ({ children, onClick, disabled, variant = \"primary\", className }) => {\r\n    const variants = {\r\n        primary: \"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg disabled:bg-blue-300 disabled:shadow-none\",\r\n        success: \"bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg disabled:bg-emerald-300 disabled:shadow-none\",\r\n        outline: \"bg-transparent border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50\",\r\n        destructive: \"bg-red-600 hover:bg-red-700 text-white shadow-md hover:shadow-lg disabled:bg-red-300 disabled:shadow-none\"\r\n    };\r\n\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n            className={`px-5 py-2.5 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center ${variants[variant]} ${disabled ? 'cursor-not-allowed' : 'cursor-pointer'} ${className}`}\r\n        >\r\n            {children}\r\n        </button>\r\n    );\r\n};\r\n\r\nconst Alert = ({ children, variant = \"error\" }) => (\r\n    <div className={`p-4 rounded-lg mb-4 text-sm border ${variant === \"error\"\r\n        ? \"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-700 dark:text-red-400\"\r\n        : \"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-400\"\r\n        }`}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst Badge = ({ children, variant = \"default\" }) => {\r\n    const styles = {\r\n        default: \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\",\r\n        success: \"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400\",\r\n        danger: \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\",\r\n        warning: \"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400\",\r\n        Present: \"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400\",\r\n        Absent: \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\",\r\n        Late: \"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400\",\r\n        \"Half Day\": \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\"\r\n    };\r\n\r\n    const current = styles[variant] || styles.default;\r\n\r\n    return (\r\n        <span className={`inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ${current}`}>\r\n            {children}\r\n        </span>\r\n    );\r\n};\r\n\r\n// --- Main Page Component ---\r\n\r\nconst AttendancePage = () => {\r\n    const [attendance, setAttendance] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [actionError, setActionError] = useState(null);\r\n    const [successMessage, setSuccessMessage] = useState(null);\r\n    const [isCheckingIn, setIsCheckingIn] = useState(false);\r\n    const [isCheckingOut, setIsCheckingOut] = useState(false);\r\n    const [currentLocation, setCurrentLocation] = useState(null);\r\n    const [showLocationModal, setShowLocationModal] = useState(false);\r\n    const [pendingAction, setPendingAction] = useState(null); // 'check-in' or 'check-out'\r\n    \r\n    // Pending checkouts modal states\r\n    const [showPendingCheckoutsModal, setShowPendingCheckoutsModal] = useState(false);\r\n    const [pendingCheckouts, setPendingCheckouts] = useState([]);\r\n\r\n    // Overtime states\r\n    const [isStartingOvertime, setIsStartingOvertime] = useState(false);\r\n    const [isEndingOvertime, setIsEndingOvertime] = useState(false);\r\n\r\n    const isSecureContext = typeof window !== 'undefined' ? window.isSecureContext : false;\r\n\r\n    // Month Filter State\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); // YYYY-MM\r\n\r\n    // Fetch Attendance Data\r\n    const fetchAttendance = async () => {\r\n        try {\r\n            setError(null);\r\n            // Using /my-attendance which is the correct existing endpoint\r\n            const response = await api.get(\"/my-attendance\");\r\n            const data = response.data.data || response.data; // Handle pagination if present\r\n            setAttendance(Array.isArray(data) ? data : []);\r\n        } catch (err) {\r\n            console.error(\"Fetch error:\", err);\r\n            setError(\"Failed to load attendance records. Please try again later.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchAttendance();\r\n    }, []);\r\n\r\n    // Clear messages after 3 seconds\r\n    useEffect(() => {\r\n        if (successMessage || actionError) {\r\n            const timer = setTimeout(() => {\r\n                setSuccessMessage(null);\r\n                setActionError(null);\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [successMessage, actionError]);\r\n\r\n    // Prevent body scroll when modal is open\r\n    useEffect(() => {\r\n        if (showLocationModal) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'unset';\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [showLocationModal]);\r\n\r\n    // Get Location - REQUIRED, no fallback\r\n    const getLocation = () => {\r\n        return new Promise((resolve, reject) => {\r\n            if (!isSecureContext) {\r\n                reject(\r\n                    new Error(\r\n                        'Location requires a secure context. Open the app on http://localhost:3000 (or use HTTPS).'\r\n                    )\r\n                );\r\n                return;\r\n            }\r\n\r\n            console.log(\"üîç Checking geolocation support...\");\r\n            \r\n            if (!navigator.geolocation) {\r\n                console.error(\"‚ùå Geolocation not supported\");\r\n                reject(new Error(\"Geolocation is not supported by your browser. Please use a modern browser to check in.\"));\r\n                return;\r\n            }\r\n\r\n            console.log(\"‚úÖ Geolocation supported, requesting permission...\");\r\n\r\n            // Helpful diagnostic (does not trigger prompt)\r\n            if (navigator.permissions?.query) {\r\n                navigator.permissions\r\n                    .query({ name: 'geolocation' })\r\n                    .then((status) => {\r\n                        console.log('üß≠ Geolocation permission state:', status.state);\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log('üß≠ Geolocation permission query failed:', e);\r\n                    });\r\n            }\r\n\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    console.log(\"‚úÖ Location obtained:\", position.coords);\r\n                    const location = {\r\n                        latitude: position.coords.latitude,\r\n                        longitude: position.coords.longitude\r\n                    };\r\n                    setCurrentLocation(location);\r\n                    resolve(location);\r\n                },\r\n                (error) => {\r\n                    console.error(\"‚ùå Location error:\", error.code, error.message);\r\n                    let errorMessage = \"Location access denied. Please allow location access to check in.\";\r\n                    \r\n                    if (error.code === error.PERMISSION_DENIED) {\r\n                        errorMessage = \"Location permission denied. You must allow location access to check in/out.\";\r\n                    } else if (error.code === error.POSITION_UNAVAILABLE) {\r\n                        errorMessage = \"Location information unavailable. Please try again.\";\r\n                    } else if (error.code === error.TIMEOUT) {\r\n                        errorMessage = \"Location request timed out. Please try again.\";\r\n                    }\r\n                    \r\n                    reject(new Error(errorMessage));\r\n                },\r\n                { \r\n                    timeout: 15000, \r\n                    enableHighAccuracy: true, \r\n                    maximumAge: 0 \r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    // Get Device Information\r\n    const getDeviceInfo = () => {\r\n        const ua = navigator.userAgent;\r\n        let deviceType = 'Desktop';\r\n        \r\n        if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\r\n            deviceType = 'Tablet';\r\n        } else if (/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\r\n            deviceType = 'Mobile';\r\n        }\r\n\r\n        // Extract browser name\r\n        let browser = 'Unknown';\r\n        if (ua.indexOf('Firefox') > -1) browser = 'Firefox';\r\n        else if (ua.indexOf('Chrome') > -1) browser = 'Chrome';\r\n        else if (ua.indexOf('Safari') > -1) browser = 'Safari';\r\n        else if (ua.indexOf('Edge') > -1) browser = 'Edge';\r\n        else if (ua.indexOf('MSIE') > -1 || ua.indexOf('Trident') > -1) browser = 'IE';\r\n\r\n        // Generate a device ID (stored in localStorage)\r\n        let deviceId = localStorage.getItem('device_id');\r\n        if (!deviceId) {\r\n            deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n            localStorage.setItem('device_id', deviceId);\r\n        }\r\n\r\n        return {\r\n            device_id: deviceId,\r\n            device_type: deviceType,\r\n            browser: browser\r\n        };\r\n    };\r\n\r\n    // Check In Handler - Request location first, then show modal\r\n    const handleCheckIn = async () => {\r\n        console.log(\"üîµ Check-in button clicked\");\r\n        \r\n        // Check if already checked in today\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        const todayRecord = attendance.find(\r\n            (record) => new Date(record.date).toISOString().split(\"T\")[0] === today\r\n        );\r\n        \r\n        if (todayRecord?.check_in) {\r\n            setActionError(\"You have already checked in today.\");\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            setPendingAction('check-in');\r\n            setActionError(null);\r\n            \r\n            console.log(\"üìç Requesting location for check-in...\");\r\n            // Request location permission immediately - this triggers browser prompt\r\n            const location = await getLocation();\r\n            \r\n            console.log(\"‚úÖ Location received:\", location);\r\n            \r\n            // Check for pending checkouts before proceeding\r\n            const checkResponse = await api.post(\"/my-attendance/check-in\", {\r\n                latitude: location.latitude,\r\n                longitude: location.longitude,\r\n                ...getDeviceInfo()\r\n            });\r\n            \r\n            // If the response indicates pending checkouts\r\n            if (checkResponse.data.requires_action && checkResponse.data.pending_checkouts) {\r\n                console.log(\"‚ö†Ô∏è Pending checkouts detected:\", checkResponse.data.pending_checkouts);\r\n                setPendingCheckouts(checkResponse.data.pending_checkouts);\r\n                setShowPendingCheckoutsModal(true);\r\n                setCurrentLocation(location); // Save location for later use\r\n                return;\r\n            }\r\n            \r\n            // If no pending checkouts, proceed normally\r\n            setShowLocationModal(true);\r\n        } catch (err) {\r\n            console.error(\"‚ùå Check-in error:\", err);\r\n            \r\n            // If it's a 409 error (already checked in), show appropriate message\r\n            if (err?.response?.status === 409) {\r\n                setActionError(err?.response?.data?.message || \"Already checked in today.\");\r\n            } else {\r\n                setActionError(\r\n                    err?.message ||\r\n                        \"Location access denied. In Brave: click the icon near the URL ‚Üí Site settings ‚Üí Location ‚Üí Allow\"\r\n                );\r\n            }\r\n            setPendingAction(null);\r\n        }\r\n    };\r\n\r\n    // Skip pending checkouts and proceed with new check-in\r\n    const skipPendingCheckoutsAndCheckIn = async () => {\r\n        try {\r\n            setIsCheckingIn(true);\r\n            setActionError(null);\r\n            setShowPendingCheckoutsModal(false);\r\n\r\n            const deviceInfo = getDeviceInfo();\r\n            const payload = {\r\n                latitude: currentLocation.latitude,\r\n                longitude: currentLocation.longitude,\r\n                force_checkin: true, // Force check-in even with pending checkouts\r\n                ...deviceInfo\r\n            };\r\n\r\n            await api.post(\"/my-attendance/check-in\", payload);\r\n            setSuccessMessage(\"Checked in successfully! Don't forget to check out your pending sessions.\");\r\n            await fetchAttendance(); // Reload list\r\n        } catch (err) {\r\n            console.error(\"Force check-in error:\", err);\r\n            setActionError(err?.message || err?.response?.data?.message || \"Failed to check in.\");\r\n        } finally {\r\n            setIsCheckingIn(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n            setPendingCheckouts([]);\r\n        }\r\n    };\r\n\r\n    // Close pending checkouts modal\r\n    const closePendingCheckoutsModal = () => {\r\n        setShowPendingCheckoutsModal(false);\r\n        setPendingCheckouts([]);\r\n        setPendingAction(null);\r\n        setCurrentLocation(null);\r\n    };\r\n\r\n    // Check Out Handler - Current Session Only\r\n    // Check Out Handler - Current Session Only\r\n    const handleCheckOut = async () => {\r\n        console.log(\"üî¥ Check-out button clicked\");\r\n        setActionError(null);\r\n        console.log(\"üî¥ Getting location for check-out...\");\r\n\r\n        try {\r\n            const location = await getLocation();\r\n            console.log(\"‚úÖ Location obtained:\", location);\r\n            setCurrentLocation(location);\r\n            setPendingAction('check-out');\r\n            setShowLocationModal(true);\r\n        } catch (error) {\r\n            console.error(\"‚ùå Location error:\", error);\r\n            setActionError(error.message || \"Failed to get your location. Please enable location services.\");\r\n        }\r\n    };\r\n\r\n    // Proceed with Check In after location confirmation\r\n    const proceedWithCheckIn = async () => {\r\n        try {\r\n            setIsCheckingIn(true);\r\n            setActionError(null);\r\n            setShowLocationModal(false);\r\n\r\n            // Location already captured, just get device info\r\n            const deviceInfo = getDeviceInfo();\r\n\r\n            const payload = {\r\n                latitude: currentLocation.latitude,\r\n                longitude: currentLocation.longitude,\r\n                force_checkin: true, // Use force to ensure check-in happens\r\n                ...deviceInfo\r\n            };\r\n\r\n            await api.post(\"/my-attendance/check-in\", payload);\r\n            setSuccessMessage(\"Checked in successfully at your current location!\");\r\n            await fetchAttendance(); // Reload list\r\n        } catch (err) {\r\n            console.error(\"Check-in error:\", err);\r\n            setActionError(err?.message || err?.response?.data?.message || \"Failed to check in.\");\r\n        } finally {\r\n            setIsCheckingIn(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n        }\r\n    };\r\n\r\n    // Perform Check-Out - Current Session Only\r\n    const performCheckOut = async () => {\r\n        try {\r\n            setIsCheckingOut(true);\r\n            setShowLocationModal(false);\r\n            \r\n            const response = await api.post(\"/my-attendance/check-out\", {\r\n                check_out_latitude: currentLocation.latitude,\r\n                check_out_longitude: currentLocation.longitude,\r\n            });\r\n\r\n            setSuccessMessage(\"Successfully checked out! üëã\");\r\n            await fetchAttendance();\r\n        } catch (error) {\r\n            console.error(\"Checkout error:\", error);\r\n            \r\n            // Check if it's a time restriction error\r\n            if (error.response?.data?.error === 'checkout_restricted') {\r\n                setActionError(error.response.data.message || \"Checkout is not allowed after 9:00 PM. Please contact HR/Admin/SuperAdmin.\");\r\n            } else {\r\n                setActionError(error.response?.data?.message || \"Failed to check out. Please try again.\");\r\n            }\r\n        } finally {\r\n            setIsCheckingOut(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n        }\r\n    };\r\n\r\n    // Handle Start Overtime\r\n    const handleStartOvertime = async () => {\r\n        try {\r\n            setIsStartingOvertime(true);\r\n            setActionError(null);\r\n            \r\n            await api.post(\"/my-attendance/overtime/start\");\r\n            setSuccessMessage(\"Overtime started successfully!\");\r\n            await fetchAttendance();\r\n        } catch (err) {\r\n            console.error(\"Start overtime error:\", err);\r\n            setActionError(err?.response?.data?.message || \"Failed to start overtime. Please try again.\");\r\n        } finally {\r\n            setIsStartingOvertime(false);\r\n        }\r\n    };\r\n\r\n    // Handle End Overtime\r\n    const handleEndOvertime = async () => {\r\n        try {\r\n            setIsEndingOvertime(true);\r\n            setActionError(null);\r\n            \r\n            await api.post(\"/my-attendance/overtime/end\");\r\n            setSuccessMessage(\"Overtime ended successfully!\");\r\n            await fetchAttendance();\r\n        } catch (err) {\r\n            console.error(\"End overtime error:\", err);\r\n            setActionError(err?.response?.data?.message || \"Failed to end overtime. Please try again.\");\r\n        } finally {\r\n            setIsEndingOvertime(false);\r\n        }\r\n    };\r\n\r\n    // Determine today's status for button states\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n    const todayRecord = attendance.find(\r\n        (record) => new Date(record.date).toISOString().split(\"T\")[0] === today\r\n    );\r\n    const isCheckedInToday = !!todayRecord?.check_in;\r\n    const isCheckedOutToday = !!todayRecord?.check_out;\r\n    const hasStartedOvertime = !!todayRecord?.overtime_start;\r\n    const hasEndedOvertime = !!todayRecord?.overtime_end;\r\n\r\n    // Calculate Stats\r\n    const weeklyStats = calculateWeeklyStats(attendance);\r\n    const monthlyStats = calculateMonthlyStats(attendance, selectedMonth);\r\n\r\n    // Filter attendance for display based on selected month\r\n    const filteredAttendance = attendance.filter(record => record.date.startsWith(selectedMonth));\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-screen bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400 transition-colors\">\r\n                <div className=\"text-xl font-medium animate-pulse\">Loading attendance...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-[1200px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200\">\r\n\r\n            {/* Header & Actions */}\r\n            <div className=\"flex flex-col gap-6 mb-8\">\r\n                <div className=\"flex justify-between items-center flex-wrap gap-4\">\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">My Attendance</h1>\r\n\r\n                    <div className=\"flex gap-4 flex-wrap\">\r\n                        <Button\r\n                            onClick={handleCheckIn}\r\n                            disabled={isCheckingIn || isCheckedInToday}\r\n                            variant=\"success\"\r\n                        >\r\n                            {isCheckingIn ? \"Checking In...\" : isCheckedInToday ? \"Checked In\" : \"Check In\"}\r\n                        </Button>\r\n                        \r\n                        <Button\r\n                            onClick={handleCheckOut}\r\n                            disabled={isCheckingOut || !isCheckedInToday || isCheckedOutToday}\r\n                            variant=\"destructive\"\r\n                        >\r\n                            {isCheckingOut ? \"Checking Out...\" : isCheckedOutToday ? \"Checked Out\" : \"Check Out\"}\r\n                        </Button>\r\n\r\n                        {/* Overtime Buttons */}\r\n                        {isCheckedOutToday && !hasEndedOvertime && (\r\n                            <>\r\n                                <Button\r\n                                    onClick={handleStartOvertime}\r\n                                    disabled={isStartingOvertime || hasStartedOvertime}\r\n                                    variant=\"primary\"\r\n                                    className=\"bg-purple-600 hover:bg-purple-700\"\r\n                                >\r\n                                    {isStartingOvertime ? \"Starting...\" : hasStartedOvertime ? \"OT Started\" : \"Start Overtime\"}\r\n                                </Button>\r\n                                \r\n                                {hasStartedOvertime && (\r\n                                    <Button\r\n                                        onClick={handleEndOvertime}\r\n                                        disabled={isEndingOvertime}\r\n                                        variant=\"primary\"\r\n                                        className=\"bg-orange-600 hover:bg-orange-700\"\r\n                                    >\r\n                                        {isEndingOvertime ? \"Ending...\" : \"End Overtime\"}\r\n                                    </Button>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Messages */}\r\n                {actionError && (\r\n                    <Alert variant=\"error\">\r\n                        <strong>Error:</strong> {actionError}\r\n                    </Alert>\r\n                )}\r\n                {successMessage && (\r\n                    <Alert variant=\"success\">\r\n                        <strong>Success:</strong> {successMessage}\r\n                    </Alert>\r\n                )}\r\n                {error && (\r\n                    <Alert variant=\"error\">\r\n                        {error}\r\n                    </Alert>\r\n                )}\r\n            </div>\r\n\r\n            {/* Summaries Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n\r\n                {/* Weekly Summary */}\r\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200\">\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium uppercase tracking-wide\">This Week</div>\r\n                    <div className=\"flex items-baseline gap-2 mb-4\">\r\n                        <span className=\"text-3xl font-bold text-gray-900 dark:text-white\">{weeklyStats.formatted || \"0h 0m\"}</span>\r\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">worked</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4\">\r\n                        <span>Days: <strong className=\"text-gray-700 dark:text-gray-300\">{weeklyStats.daysWorked || 0}</strong></span>\r\n                        <span>Avg: <strong className=\"text-gray-700 dark:text-gray-300\">{weeklyStats.average || \"0h\"}</strong> / day</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Monthly Summary */}\r\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide\">Monthly Overview</div>\r\n                        <input\r\n                            type=\"month\"\r\n                            id=\"month-filter\"\r\n                            name=\"month-filter\"\r\n                            value={selectedMonth}\r\n                            onChange={(e) => setSelectedMonth(e.target.value)}\r\n                            className=\"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-sm px-3 py-1 rounded border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-baseline gap-2 mb-4\">\r\n                        <span className=\"text-3xl font-bold text-gray-900 dark:text-white\">{monthlyStats.formatted || \"0h 0m\"}</span>\r\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">worked</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4\">\r\n                        <span>Days: <strong className=\"text-gray-700 dark:text-gray-300\">{monthlyStats.daysWorked || 0}</strong></span>\r\n                        <span>Avg: <strong className=\"text-gray-700 dark:text-gray-300\">{monthlyStats.average || \"0h\"}</strong> / day</span>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            {/* Attendance List */}\r\n            <Card className=\"overflow-hidden\">\r\n                <CardHeader>\r\n                    <CardTitle>Attendance History ({new Date(selectedMonth + \"-01\").toLocaleString('default', { month: 'long', year: 'numeric' })})</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"p-0\">\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-left border-collapse\">\r\n                            <thead className=\"bg-gray-50 dark:bg-gray-700/50\">\r\n                                <tr>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Date</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Check In</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Check Out</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Hours</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Overtime</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Location</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Device</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Status</th>\r\n                                    <th className=\"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider\">Remarks</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                                {filteredAttendance.length > 0 ? (\r\n                                    filteredAttendance.map((record) => (\r\n                                        <tr key={record.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors\">\r\n                                            <td className=\"p-4 text-sm font-medium text-gray-900 dark:text-white\">\r\n                                                {new Date(record.date).toLocaleDateString(\"en-US\", {\r\n                                                    weekday: 'short', year: 'numeric', month: 'short', day: 'numeric'\r\n                                                })}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm text-gray-700 dark:text-gray-300\">\r\n                                                <div className=\"flex flex-col\">\r\n                                                    <span>{record.check_in ? formatTime(record.check_in, record.date) : \"--:--\"}</span>\r\n                                                    {record.check_in_latitude && record.check_in_longitude && (\r\n                                                        <a \r\n                                                            href={`https://www.google.com/maps?q=${record.check_in_latitude},${record.check_in_longitude}`}\r\n                                                            target=\"_blank\"\r\n                                                            rel=\"noopener noreferrer\"\r\n                                                            className=\"text-xs text-blue-600 hover:underline mt-1\"\r\n                                                            onClick={(e) => e.stopPropagation()}\r\n                                                        >\r\n                                                            üìç View\r\n                                                        </a>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm text-gray-700 dark:text-gray-300\">\r\n                                                <div className=\"flex flex-col\">\r\n                                                    <span>{record.check_out ? formatTime(record.check_out, record.date) : \"--:--\"}</span>\r\n                                                    {record.check_out_latitude && record.check_out_longitude && (\r\n                                                        <a \r\n                                                            href={`https://www.google.com/maps?q=${record.check_out_latitude},${record.check_out_longitude}`}\r\n                                                            target=\"_blank\"\r\n                                                            rel=\"noopener noreferrer\"\r\n                                                            className=\"text-xs text-blue-600 hover:underline mt-1\"\r\n                                                            onClick={(e) => e.stopPropagation()}\r\n                                                        >\r\n                                                            üìç View\r\n                                                        </a>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm font-semibold text-indigo-600 dark:text-indigo-400\">\r\n                                                {calculateHours(record.check_in, record.check_out)}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm\">\r\n                                                {record.overtime_start ? (\r\n                                                    <div className=\"flex flex-col gap-1\">\r\n                                                        <span className=\"text-xs font-medium text-purple-600 dark:text-purple-400\">\r\n                                                            Start: {formatTime(record.overtime_start, record.date)}\r\n                                                        </span>\r\n                                                        {record.overtime_end ? (\r\n                                                            <>\r\n                                                                <span className=\"text-xs font-medium text-orange-600 dark:text-orange-400\">\r\n                                                                    End: {formatTime(record.overtime_end, record.date)}\r\n                                                                </span>\r\n                                                                <span className=\"text-xs font-bold text-green-600 dark:text-green-400\">\r\n                                                                    {record.overtime_hours}h OT\r\n                                                                </span>\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            <span className=\"text-xs text-amber-600 dark:text-amber-400\">\r\n                                                                ‚è≥ In Progress\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-gray-400 text-xs\">--</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-xs text-gray-600 dark:text-gray-400\">\r\n                                                {record.check_in_latitude && record.check_in_longitude ? (\r\n                                                    <div className=\"flex flex-col gap-1\">\r\n                                                        <span className=\"font-medium\">In: {Number(record.check_in_latitude).toFixed(4)}, {Number(record.check_in_longitude).toFixed(4)}</span>\r\n                                                        {record.check_out_latitude && record.check_out_longitude && (\r\n                                                            <span className=\"font-medium\">Out: {Number(record.check_out_latitude).toFixed(4)}, {Number(record.check_out_longitude).toFixed(4)}</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-gray-400\">--</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-xs text-gray-600 dark:text-gray-400\">\r\n                                                {record.device_id ? (\r\n                                                    <div className=\"flex flex-col gap-1\">\r\n                                                        <span className=\"font-medium\">{record.device_type || 'Unknown'}</span>\r\n                                                        <span className=\"text-gray-500 dark:text-gray-500 truncate max-w-[120px]\" title={String(record.device_id)}>\r\n                                                            ID: {String(record.device_id).substring(0, 12)}...\r\n                                                        </span>\r\n                                                        {record.browser && (\r\n                                                            <span className=\"text-gray-500 dark:text-gray-500\">{record.browser}</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-gray-400\">--</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-sm\">\r\n                                                <Badge variant={record.status}>\r\n                                                    {record.status}\r\n                                                </Badge>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-xs text-gray-600 dark:text-gray-400\">\r\n                                                <div className=\"flex flex-col gap-1\">\r\n                                                    <span className=\"font-medium text-green-600 dark:text-green-400\">\r\n                                                        ‚úì Checked in by {record.checked_in_by || 'self'}\r\n                                                    </span>\r\n                                                    {record.check_out && (\r\n                                                        <span className=\"font-medium text-purple-600 dark:text-purple-400\">\r\n                                                            ‚úì Checked out by {record.checked_out_by || 'self'}\r\n                                                        </span>\r\n                                                    )}\r\n                                                    {!record.check_out && (\r\n                                                        <span className=\"text-amber-600 dark:text-amber-400\">\r\n                                                            ‚è≥ Pending checkout\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                ) : (\r\n                                    <tr>\r\n                                        <td colSpan=\"9\" className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\r\n                                            No attendance records found for this month.\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Location Permission Modal */}\r\n            {showLocationModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full\">\r\n                        <div className=\"p-5 border-b border-gray-200 dark:border-gray-700\">\r\n                            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                                üìç Location Required\r\n                            </h3>\r\n                            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                                Confirm your location for attendance tracking\r\n                            </p>\r\n                        </div>\r\n                        \r\n                        <div className=\"p-5 space-y-4\">\r\n                            {/* Map Preview */}\r\n                            {currentLocation && (\r\n                                <div className=\"space-y-2\">\r\n                                    <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">\r\n                                        Your Current Location:\r\n                                    </p>\r\n                                    <div className=\"h-48 rounded-lg overflow-hidden border border-gray-300 dark:border-gray-600\">\r\n                                        <MapContainer \r\n                                            center={[currentLocation.latitude, currentLocation.longitude]} \r\n                                            zoom={15} \r\n                                            style={{ height: '100%', width: '100%' }}\r\n                                            scrollWheelZoom={false}\r\n                                        >\r\n                                            <TileLayer\r\n                                                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n                                                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                                            />\r\n                                            <Marker position={[currentLocation.latitude, currentLocation.longitude]}>\r\n                                                <Popup>\r\n                                                    Your Location<br />\r\n                                                    Lat: {currentLocation.latitude.toFixed(6)}<br />\r\n                                                    Lng: {currentLocation.longitude.toFixed(6)}\r\n                                                </Popup>\r\n                                            </Marker>\r\n                                        </MapContainer>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                        üìå {currentLocation.latitude.toFixed(6)}, {currentLocation.longitude.toFixed(6)}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Info Box */}\r\n                            <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\r\n                                <p className=\"text-xs text-blue-800 dark:text-blue-300\">\r\n                                    <strong>‚ÑπÔ∏è Note:</strong> Your location is captured only during check-in/check-out for attendance verification.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={() => {\r\n                                    setShowLocationModal(false);\r\n                                    setPendingAction(null);\r\n                                    setCurrentLocation(null);\r\n                                    setIsCheckingIn(false);\r\n                                    setIsCheckingOut(false);\r\n                                }}\r\n                                disabled={isCheckingIn || isCheckingOut}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                variant={pendingAction === 'check-out' ? 'destructive' : 'success'}\r\n                                onClick={pendingAction === 'check-out' ? performCheckOut : proceedWithCheckIn}\r\n                                disabled={isCheckingIn || isCheckingOut}\r\n                            >\r\n                                {isCheckingIn || isCheckingOut \r\n                                    ? 'Processing...' \r\n                                    : pendingAction === 'check-out' \r\n                                        ? 'Confirm Check Out' \r\n                                        : 'Confirm Check In'}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Pending Checkouts Modal */}\r\n            {showPendingCheckoutsModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\r\n                        <div className=\"p-5 border-b border-gray-200 dark:border-gray-700\">\r\n                            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                                ‚ö†Ô∏è Pending Check-Outs Detected\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\r\n                                You have {pendingCheckouts.length} session{pendingCheckouts.length > 1 ? 's' : ''} without check-out. Contact HR/Admin for checkout or proceed with new check-in.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"p-5\">\r\n                            <div className=\"space-y-3\">\r\n                                {pendingCheckouts.map((session) => (\r\n                                    <div\r\n                                        key={session.id}\r\n                                        className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600\"\r\n                                    >\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div>\r\n                                                <div className=\"text-sm font-semibold text-gray-900 dark:text-white\">\r\n                                                    üìÖ {new Date(session.date).toLocaleDateString('en-US', { \r\n                                                        weekday: 'long', \r\n                                                        year: 'numeric', \r\n                                                        month: 'long', \r\n                                                        day: 'numeric' \r\n                                                    })}\r\n                                                </div>\r\n                                                <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                                                    Check-in: <span className=\"font-medium text-green-600 dark:text-green-400\">{session.check_in}</span>\r\n                                                </div>\r\n                                                {session.check_in_latitude && session.check_in_longitude && (\r\n                                                    <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                                                        üìç {Number(session.check_in_latitude).toFixed(4)}, {Number(session.check_in_longitude).toFixed(4)}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <Badge variant=\"warning\">Pending</Badge>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Info Box */}\r\n                            <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mt-4\">\r\n                                <p className=\"text-xs text-amber-800 dark:text-amber-300\">\r\n                                    <strong>‚ÑπÔ∏è Note:</strong> Employees cannot check themselves out. Please contact HR or Admin to complete these checkouts, or proceed with a new check-in. Unchecked sessions will be automatically checked out at midnight.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={closePendingCheckoutsModal}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                variant=\"success\"\r\n                                onClick={skipPendingCheckoutsAndCheckIn}\r\n                            >\r\n                                Proceed with Check In\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AttendancePage;\r\n"],"names":["L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Card","_ref","children","className","_jsx","concat","CardHeader","_ref2","CardContent","_ref3","CardTitle","_ref4","Button","_ref5","onClick","disabled","variant","primary","success","outline","destructive","Alert","_ref6","Badge","_ref7","styles","default","danger","warning","Present","Absent","Late","current","AttendancePage","attendance","setAttendance","useState","isLoading","setIsLoading","error","setError","actionError","setActionError","successMessage","setSuccessMessage","isCheckingIn","setIsCheckingIn","isCheckingOut","setIsCheckingOut","currentLocation","setCurrentLocation","showLocationModal","setShowLocationModal","pendingAction","setPendingAction","showPendingCheckoutsModal","setShowPendingCheckoutsModal","pendingCheckouts","setPendingCheckouts","isStartingOvertime","setIsStartingOvertime","isEndingOvertime","setIsEndingOvertime","isSecureContext","window","selectedMonth","setSelectedMonth","Date","toISOString","slice","fetchAttendance","async","response","api","get","data","Array","isArray","err","console","useEffect","timer","setTimeout","clearTimeout","document","body","style","overflow","getLocation","Promise","resolve","reject","_navigator$permission","log","navigator","geolocation","Error","permissions","query","name","then","status","state","catch","e","getCurrentPosition","position","coords","location","latitude","longitude","code","message","errorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","timeout","enableHighAccuracy","maximumAge","getDeviceInfo","ua","userAgent","deviceType","test","browser","indexOf","deviceId","localStorage","getItem","now","Math","random","toString","substr","setItem","device_id","device_type","today","split","todayRecord","find","record","date","isCheckedInToday","check_in","isCheckedOutToday","check_out","hasStartedOvertime","overtime_start","hasEndedOvertime","overtime_end","weeklyStats","calculateWeeklyStats","monthlyStats","calculateMonthlyStats","filteredAttendance","filter","startsWith","_jsxs","checkResponse","post","_objectSpread","requires_action","pending_checkouts","_err$response","_err$response2","_err$response2$data","_Fragment","_err$response5","_err$response5$data","_err$response6","_err$response6$data","formatted","daysWorked","average","type","id","value","onChange","target","toLocaleString","month","year","length","map","toLocaleDateString","weekday","day","formatTime","check_in_latitude","check_in_longitude","href","rel","stopPropagation","check_out_latitude","check_out_longitude","calculateHours","overtime_hours","Number","toFixed","title","String","substring","checked_in_by","checked_out_by","colSpan","MapContainer","center","zoom","height","width","scrollWheelZoom","TileLayer","attribution","url","Marker","Popup","_error$response","_error$response$data","_error$response2","_error$response2$data","deviceInfo","payload","force_checkin","_err$response4","_err$response4$data","session","closePendingCheckoutsModal","_err$response3","_err$response3$data"],"sourceRoot":""}