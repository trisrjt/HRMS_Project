{"version":3,"file":"static/js/846.2b9b77c4.chunk.js","mappings":"2SAWOA,IAAAA,KAAOC,QAAQC,UAAUC,YAChCH,IAAAA,KAAOC,QAAQG,aAAa,CACxBC,cAAe,iFACfC,QAAS,8EACTC,UAAW,kFAKf,MAAMC,EAAkBC,IAAkB,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAAhB,QAAEC,GAASN,EAChC,MAAMO,GAAQ,IAAIC,MAAOC,mBAAmB,QAAS,CAAEC,QAAS,OAAQC,KAAM,UAAWC,MAAO,OAAQC,IAAK,YAE7G,OACIC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2IAA0IC,SAAA,EACrJF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,0BAAyBC,SAAA,CAAC,kBACd,OAAPV,QAAO,IAAPA,GAAa,QAANL,EAAPK,EAASW,YAAI,IAAAhB,OAAN,EAAPA,EAAeiB,MAAM,KAAK,KAAM,WAAW,QAE9DJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gCAA+BC,SAAA,EAC1CF,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,gBAAYG,EAAAA,EAAAA,KAAA,UAAAH,UAAgB,OAAPV,QAAO,IAAPA,GAAiB,QAAVJ,EAAPI,EAASc,gBAAQ,IAAAlB,GAAY,QAAZC,EAAjBD,EAAmBmB,kBAAU,IAAAlB,OAAtB,EAAPA,EAA+Bc,OAAQ,YAClEH,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,iBAAaG,EAAAA,EAAAA,KAAA,UAAAH,UAAgB,OAAPV,QAAO,IAAPA,GAAiB,QAAVF,EAAPE,EAASc,gBAAQ,IAAAhB,GAAa,QAAbC,EAAjBD,EAAmBkB,mBAAW,IAAAjB,OAAvB,EAAPA,EAAgCY,OAAQ,kBAG5EH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+DAA8DC,SAAA,EACzEG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,0BAAyBC,SAAC,cACzCG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,wBAAuBC,SAAET,WAMlDgB,EAAuBC,IAAqD,IAApD,WAAEC,EAAU,UAAEC,EAAS,WAAEC,EAAU,QAAEC,GAASJ,EACxE,MAAMK,IAA0B,OAAVJ,QAAU,IAAVA,IAAAA,EAAYK,UAC5BC,IAA2B,OAAVN,QAAU,IAAVA,IAAAA,EAAYO,WAC7BC,GAAmB,OAAVR,QAAU,IAAVA,OAAU,EAAVA,EAAYQ,SAAU,aAErC,OACInB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sIAAqIC,SAAA,EAChJF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACnDG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,sDAAqDC,SAAC,wBACpEG,EAAAA,EAAAA,KAAA,QAAMJ,UAAS,8CAAAmB,OAA2D,YAAXD,EACzD,uEACA,iEACCjB,SACFiB,QAITnB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6CAA4CC,SAAA,EACvDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gDAA+CC,SAAC,cAC/DG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,sDAAqDC,SACrD,OAAVS,QAAU,IAAVA,GAAAA,EAAYK,UAAWK,EAAAA,EAAAA,IAAWV,EAAWK,UAAY,cAGlEhB,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gDAA+CC,SAAC,eAC/DG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,sDAAqDC,SACrD,OAAVS,QAAU,IAAVA,GAAAA,EAAYO,WAAYG,EAAAA,EAAAA,IAAWV,EAAWO,WAAa,cAGpElB,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gDAA+CC,SAAC,cAC/DG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,6DAA4DC,UACtEoB,EAAAA,EAAAA,IAAyB,OAAVX,QAAU,IAAVA,OAAU,EAAVA,EAAYK,SAAoB,OAAVL,QAAU,IAAVA,OAAU,EAAVA,EAAYO,oBAK9DlB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yBAAwBC,SAAA,EACnCG,EAAAA,EAAAA,KAAA,UACIkB,QAASX,EACTY,SAAUV,GAAWC,EACrBd,UAAS,yEAAAmB,OAA2EL,EAC9E,mFACA,4EACCb,SAENa,EAAc,aAAe,cAElCV,EAAAA,EAAAA,KAAA,UACIkB,QAASV,EACTW,SAAUV,IAAYC,GAAeE,EACrChB,UAAS,yEAAAmB,QAA6EL,GAAeE,EAC/F,mFACA,sEACCf,SAENe,EAAe,cAAgB,qBAO9CQ,EAAwBC,IAAA,IAAC,OAAEC,EAAM,cAAEC,EAAa,SAAEC,EAAQ,SAAEC,GAAUJ,EAAA,OACxE1B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wCAAuCC,SAAA,EAElDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iIAAgIC,SAAA,EAC3IF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACnDG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,sDAAqDC,SAAC,mBACpEG,EAAAA,EAAAA,KAAA,UAAQkB,QAASA,IAAMO,EAAS,oBAAqB7B,UAAU,8HAA6HC,SAAC,gBAEhMyB,EAAOI,OAAS,GACb1B,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,sBAAqBC,SAC/ByB,EAAOK,IAAIC,IAAK,IAAAC,EAAA,OACblC,EAAAA,EAAAA,MAAA,OAAoBC,UAAU,+GAA8GC,SAAA,EACxIF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,+CAA8CC,UAAkB,QAAhBgC,EAAAD,EAAME,kBAAU,IAAAD,OAAA,EAAhBA,EAAkB/B,OAAQ,WACzFH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDC,SAAA,CAC3D,IAAIR,KAAKuC,EAAMG,YAAYzC,qBAAqB,MAAI,IAAID,KAAKuC,EAAMI,UAAU1C,4BAGtFU,EAAAA,EAAAA,KAAA,QAAMJ,UAAS,2CAAAmB,OAA8D,aAAjBa,EAAMd,OAAwB,uEACrE,aAAjBc,EAAMd,OAAwB,+DAC1B,4EACDjB,SACF+B,EAAMd,WAXLc,EAAMK,SAiBxBjC,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,iCAAgCC,SAAC,yBAKxDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iIAAgIC,SAAA,EAC3IF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACnDG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,sDAAqDC,SAAC,mBACpEG,EAAAA,EAAAA,KAAA,UAAQkB,QAASA,IAAMO,EAAS,2BAA4B7B,UAAU,8HAA6HC,SAAC,gBAEvM0B,EAAcG,OAAS,GACpB1B,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,sBAAqBC,SAC/B0B,EAAcI,IAAIO,IACfvC,EAAAA,EAAAA,MAAA,OAAkBC,UAAU,6EAA4EC,SAAA,EACpGG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oDAAmDC,SAAEqC,EAAIC,SACxEnC,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,2CAA0CC,SAAE,IAAIR,KAAK6C,EAAIE,YAAY9C,yBAF9E4C,EAAID,QAOtBjC,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,iCAAgCC,SAAC,yBAKxDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iIAAgIC,SAAA,EAC3IF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACnDG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,sDAAqDC,SAAC,qBACpEG,EAAAA,EAAAA,KAAA,UAAQkB,QAASA,IAAMO,EAAS,sBAAuB7B,UAAU,8HAA6HC,SAAC,gBAElM2B,EAASE,OAAS,GACf1B,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,sBAAqBC,SAC/B2B,EAASG,IAAIU,IACV1C,EAAAA,EAAAA,MAAA,OAAsBC,UAAU,6IAA4IC,SAAA,EACxKG,EAAAA,EAAAA,KAAA,OAAAH,UACIF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yDAAwDC,SAAA,CAClE,IAAIR,KAAK,EAAGgD,EAAQ5C,MAAQ,GAAG6C,eAAe,UAAW,CAAE7C,MAAO,UAAW,IAAE4C,EAAQ7C,WAGhGG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mDAAkDC,SAAA,CAAC,SAC5D0C,OAAOF,EAAQG,SAAW,GAAGF,sBAP7BD,EAAQJ,QAa1BjC,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,iCAAgCC,SAAC,6BA6chE,EArcsB4C,KAAO,IAADC,EAAAC,EACxB,MAAM,KAAEC,IAASC,EAAAA,EAAAA,KACXpB,GAAWqB,EAAAA,EAAAA,OAEVC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,CAC7B9D,QAAS,KACTmB,WAAY,KACZiB,cAAe,GACfD,OAAQ,GACRE,SAAU,MAEP0B,EAAWC,IAAgBF,EAAAA,EAAAA,WAAS,IACpCG,EAAeC,IAAoBJ,EAAAA,EAAAA,WAAS,IAC5CK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,OAC5BO,EAAiBC,IAAsBR,EAAAA,EAAAA,UAAS,OAChDS,EAAmBC,IAAwBV,EAAAA,EAAAA,WAAS,IACpDW,EAAeC,IAAoBZ,EAAAA,EAAAA,UAAS,OAG5Ca,EAAoBC,IAAyBd,EAAAA,EAAAA,WAAS,IACtDe,EAAuBC,IAA4BhB,EAAAA,EAAAA,WAAS,GAE7DiB,EAAoC,qBAAXC,QAAyBA,OAAOD,gBAGzDE,EAAqBC,UACvB,IAEI,MAAMC,QAAmBC,EAAAA,EAAIC,IAAI,SAG3BC,QAAyBF,EAAAA,EAAIC,IAAI,kBACjCE,EAAoBD,EAAiB1B,KAAKA,MAAQ0B,EAAiB1B,KAGzE,IAAI4B,EAAa,GACjB,IAEIA,SADwBJ,EAAAA,EAAIC,IAAI,eACTzB,IAC3B,CAAE,MAAOO,GACLsB,QAAQC,KAAK,0BAA2BvB,EAC5C,CAGA,IAAIwB,EAAe,GACnB,IAEIA,SAD0BP,EAAAA,EAAIC,IAAI,iBACPzB,IAC/B,CAAE,MAAOO,GAAQ,IAADyB,EAEmB,OAAb,QAAdA,EAAAzB,EAAM0B,gBAAQ,IAAAD,OAAA,EAAdA,EAAgBjE,SAChB8D,QAAQC,KAAK,4BAA6BvB,EAElD,CAIA,MAAM2B,QAAsBV,EAAAA,EAAIC,IAAI,kBAC9BU,GAAW,IAAI7F,MAAO8F,cAAcpF,MAAM,KAAK,GAC/CqF,EAAiBH,EAAclC,KAAKA,MAAQkC,EAAclC,KAEhE,IAAIsC,EAAkB,KAClBC,MAAMC,QAAQH,KACdC,EAAkBD,EAAeI,KAAKC,GAAKA,EAAEC,OAASR,IAAa,MAGvElC,EAAQ,CACJ7D,QAASmF,EAAWvB,KACpBzC,WAAY+E,EACZ9D,cAAe+D,MAAMC,QAAQb,GAAqBA,EAAkBiB,MAAM,EAAG,GAAK,GAClFrE,OAAQgE,MAAMC,QAAQZ,GAAcA,EAAWgB,MAAM,EAAG,GAAK,GAC7DnE,SAAU8D,MAAMC,QAAQT,GAAgBA,EAAaa,MAAM,EAAG,GAAK,KAEvEpC,EAAS,KACb,CAAE,MAAOqC,GACLhB,QAAQtB,MAAM,yBAA0BsC,GAExCrC,EAAS,mDACb,CAAC,QACGJ,GAAa,EACjB,IAGJ0C,EAAAA,EAAAA,WAAU,KACNzB,KACD,KAGHyB,EAAAA,EAAAA,WAAU,KAEFC,SAASC,KAAKC,MAAMC,SADpBvC,EAC+B,SAEA,QAE5B,KACHoC,SAASC,KAAKC,MAAMC,SAAW,UAEpC,CAACvC,IAGJ,MAoGMwC,EAAyB7B,UAI3B,GAHAO,QAAQuB,IAAa,aAATC,EAAsB,+CAAuC,iDAG5D,cAATA,EAAsB,CAEtB,IADoB,IAAI/G,MAAOgH,YACZ,GAEf,YADAC,MAAM,4FAGd,CAEA,IACIzC,EAAiBuC,GAEjBxB,QAAQuB,IAAI,uCAA8BC,GAE1C,MAAMG,QApHH,IAAIC,QAAQ,CAACC,EAASC,KAAY,IAADC,EACpC,GAAKzC,EAAL,CAWA,GAFAU,QAAQuB,IAAI,iDAEPS,UAAUC,YAGX,OAFAjC,QAAQtB,MAAM,yCACdoD,EAAO,IAAII,MAAM,2FAIrBlC,QAAQuB,IAAI,0DAGa,QAAzBQ,EAAIC,UAAUG,mBAAW,IAAAJ,GAArBA,EAAuBK,OACvBJ,UAAUG,YACLC,MAAM,CAAElH,KAAM,gBACdmH,KAAMnG,IACH8D,QAAQuB,IAAI,6CAAoCrF,EAAOoG,SAE1DC,MAAOC,IACJxC,QAAQuB,IAAI,oDAA2CiB,KAInER,UAAUC,YAAYQ,mBACjBC,IACG1C,QAAQuB,IAAI,4BAAwBmB,EAASC,QAC7C,MAAMhB,EAAW,CACbiB,SAAUF,EAASC,OAAOC,SAC1BC,UAAWH,EAASC,OAAOE,WAE/BhE,EAAmB8C,GACnBE,EAAQF,IAEXjD,IACGsB,QAAQtB,MAAM,yBAAqBA,EAAMoE,KAAMpE,EAAMqE,SACrD,IAAIC,EAAe,oEAEftE,EAAMoE,OAASpE,EAAMuE,kBACrBD,EAAe,8EACRtE,EAAMoE,OAASpE,EAAMwE,qBAC5BF,EAAe,sDACRtE,EAAMoE,OAASpE,EAAMyE,UAC5BH,EAAe,iDAGnBlB,EAAO,IAAII,MAAMc,KAErB,CACII,QAAS,KACTC,oBAAoB,EACpBC,WAAY,GAnDpB,MANIxB,EACI,IAAII,MACA,gGAkHZlC,QAAQuB,IAAI,2CAAuCI,GAEnD5C,GAAqB,EACzB,CAAE,MAAOiC,GACLhB,QAAQtB,MAAM,yBAAqBsC,GACnCU,MAAM,qBAAyB,OAAHV,QAAG,IAAHA,OAAG,EAAHA,EAAK+B,UAAW,sDAC5C9D,EAAiB,KACrB,GA4EJ,OAAIX,GAEIlD,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,2HAA0HC,UACrIG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oCAAmCC,SAAC,4BAK1DkD,EAAK5D,SAAWmE,GAEb3D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kIAAiIC,SAAA,EAC5IG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,OAAMC,SAAEyD,KACvBtD,EAAAA,EAAAA,KAAA,UAAQkB,QAASkD,EAAoBxE,UAAU,kFAAiFC,SAAC,cAMzIF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qGAAoGC,SAAA,EAC/GG,EAAAA,EAAAA,KAACpB,EAAe,CAACO,QAAS4D,EAAK5D,WAG/Ba,EAAAA,EAAAA,KAACI,EAAoB,CACjBE,WAAYyC,EAAKzC,WACjBC,UAAWA,IAAM2F,EAAuB,YACxC1F,WAAYA,IAAM0F,EAAuB,aACzCzF,QAAS2C,KAIA,QAAZV,EAAAK,EAAK5D,eAAO,IAAAuD,OAAA,EAAZA,EAAczC,YAAa8C,EAAK5D,QAAQc,SAASkI,kBAAoBnE,IAClEhE,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,2FAA0FC,UACrGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oDAAmDC,SAAA,EAC9DF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,yBAAwBC,SAAC,sCACvCG,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,qBAAoBC,SAAC,8FAItCG,EAAAA,EAAAA,KAAA,UACIkB,QAASA,IAAM6C,GAAsB,GACrCnE,UAAU,sIAAqIC,SAClJ,sBAQbG,EAAAA,EAAAA,KAACoB,EAAqB,CAClBE,OAAQyB,EAAKzB,OACbC,cAAewB,EAAKxB,cACpBC,SAAUuB,EAAKvB,SACfC,SAAUA,IAIbiC,IACG1D,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,iFAAgFC,UAC3FF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kEAAiEC,SAAA,EAC5EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oDAAmDC,SAAA,EAC9DG,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,kDAAiDC,SAAC,oCAGhEG,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,gDAA+CC,SAAC,sDAKjEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,CAEzB2D,IACG7D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACtBG,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,uDAAsDC,SAAC,4BAGpEG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,8EAA6EC,UACxFF,EAAAA,EAAAA,MAACyI,EAAAA,EAAY,CACTC,OAAQ,CAAC7E,EAAgBgE,SAAUhE,EAAgBiE,WACnDa,KAAM,GACNtC,MAAO,CAAEuC,OAAQ,OAAQC,MAAO,QAChCC,iBAAiB,EAAM5I,SAAA,EAEvBG,EAAAA,EAAAA,KAAC0I,EAAAA,EAAS,CACNC,YAAY,2EACZC,IAAI,wDAER5I,EAAAA,EAAAA,KAAC6I,EAAAA,EAAM,CAACvB,SAAU,CAAC9D,EAAgBgE,SAAUhE,EAAgBiE,WAAW5H,UACpEF,EAAAA,EAAAA,MAACmJ,EAAAA,EAAK,CAAAjJ,SAAA,CAAC,iBACUG,EAAAA,EAAAA,KAAA,SAAM,QACbwD,EAAgBgE,SAASuB,QAAQ,IAAG/I,EAAAA,EAAAA,KAAA,SAAM,QAC1CwD,EAAgBiE,UAAUsB,QAAQ,cAKxDpJ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,2CAA0CC,SAAA,CAAC,gBAChD2D,EAAgBgE,SAASuB,QAAQ,GAAG,KAAGvF,EAAgBiE,UAAUsB,QAAQ,UAMzF/I,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,4FAA2FC,UACtGF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,2CAA0CC,SAAA,EACnDG,EAAAA,EAAAA,KAAA,UAAAH,SAAQ,uBAAiB,kGAKrCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2EAA0EC,SAAA,EACrFG,EAAAA,EAAAA,KAAA,UACIkB,QAASA,KACLyC,GAAqB,GACrBE,EAAiB,MACjBJ,EAAmB,MACnBJ,GAAiB,IAErBlC,SAAUiC,EACVxD,UAAU,+NAA8NC,SAC3O,YAGDG,EAAAA,EAAAA,KAAA,UACIkB,QArMFmD,UACtB,IACIhB,GAAiB,GACjBM,GAAqB,GAGrB,MAAMqF,EArEQC,MAClB,MAAMC,EAAKtC,UAAUuC,UACrB,IAAIC,EAAa,UAEb,mDAAmDC,KAAKH,GACxDE,EAAa,SACN,sGAAsGC,KAAKH,KAClHE,EAAa,UAIjB,IAAIE,EAAU,UACVJ,EAAGK,QAAQ,YAAc,EAAGD,EAAU,UACjCJ,EAAGK,QAAQ,WAAa,EAAGD,EAAU,SACrCJ,EAAGK,QAAQ,WAAa,EAAGD,EAAU,SACrCJ,EAAGK,QAAQ,SAAW,EAAGD,EAAU,QACnCJ,EAAGK,QAAQ,SAAW,GAAKL,EAAGK,QAAQ,YAAc,KAAGD,EAAU,MAG1E,IAAIE,EAAWC,aAAaC,QAAQ,aAMpC,OALKF,IACDA,EAAW,UAAYnK,KAAKsK,MAAQ,IAAMC,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,GAC/EN,aAAaO,QAAQ,YAAaR,IAG/B,CACHS,UAAWT,EACXU,YAAad,EACbE,QAASA,IAyCUL,GAEnB,IAAIkB,EAASC,EAES,aAAlBxG,GACAuG,GAAOE,EAAAA,EAAAA,GAAA,CACH7C,SAAUhE,EAAgBgE,SAC1BC,UAAWjE,EAAgBiE,UAC3B6C,eAAe,GACZtB,GAEPoB,EAAW,4BAEXD,EAAU,CACNI,mBAAoB/G,EAAgBgE,SACpCgD,oBAAqBhH,EAAgBiE,WAEzC2C,EAAW,kCAGT7F,EAAAA,EAAIkG,KAAKL,EAAUD,SAGnB/F,IACNkC,MAAM,GAADvF,OAAsB,aAAlB6C,EAA+B,aAAe,cAAa,2CACxE,CAAE,MAAOgC,GAAM,IAAD8E,EAAAC,EAMHC,EAAAC,EAFP,GAHAjG,QAAQtB,MAAM,GAADvC,OAAI6C,EAAa,WAAWgC,GAGP,yBAAlB,QAAZ8E,EAAA9E,EAAIZ,gBAAQ,IAAA0F,GAAM,QAANC,EAAZD,EAAc3H,YAAI,IAAA4H,OAAN,EAAZA,EAAoBrH,OACpBgD,MAAMV,EAAIZ,SAASjC,KAAK4E,SAAW,mFAEnCrB,OAAS,OAAHV,QAAG,IAAHA,GAAa,QAAVgF,EAAHhF,EAAKZ,gBAAQ,IAAA4F,GAAM,QAANC,EAAbD,EAAe7H,YAAI,IAAA8H,OAAhB,EAAHA,EAAqBlD,UAAO,aAAA5G,OAAiB6C,GAE3D,CAAC,QACGP,GAAiB,GACjBQ,EAAiB,MACjBJ,EAAmB,KACvB,GA0JwBtC,SAAUiC,EACVxD,UAAS,wEAAAmB,OAA4F,aAAlB6C,EAC7E,sCACA,gCAA+B,6DAC2B/D,SAE/DuD,EAAgB,gBAAe,WAAArC,OAAgC,aAAlB6C,EAA+B,WAAa,uBAQ7GE,IACG9D,EAAAA,EAAAA,KAAC8K,EAAAA,EAAc,CACXC,MAAmB,QAAdpI,EAAEI,EAAK5D,eAAO,IAAAwD,OAAA,EAAZA,EAAcoI,MACrBC,eAvKW3G,MAAO4G,EAAYC,KAC1C,IACI/H,GAAa,GAGb,MAAM6B,QAAiBT,EAAAA,EAAIkG,KAAK,wBAAyB,CACrDtC,gBAAiBgD,KAAKC,UAAUH,KAIpChH,GAAyB,GACzBF,GAAsB,GACtBuC,MAAMtB,EAASjC,KAAK4E,SAAW,4FAGzBvD,GACV,CAAE,MAAOwB,GAAM,IAADyF,EAAAC,EACV1G,QAAQtB,MAAM,yBAA0BsC,GACxCU,OAAkB,QAAZ+E,EAAAzF,EAAIZ,gBAAQ,IAAAqG,GAAM,QAANC,EAAZD,EAActI,YAAI,IAAAuI,OAAN,EAAZA,EAAoB3D,UAAW,2CACzC,CAAC,QACGxE,GAAa,EACjB,GAmJYoI,QAASA,IAAMxH,GAAsB,Q","sources":["pages/employees/DashboardPage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../../api/axios\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { formatTime, calculateHours, calculateWeeklyStats, calculateMonthlyStats } from \"../../utils/dateUtils\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport FaceEnrollment from \"../../components/FaceEnrollment\";\r\n\r\n// Fix default marker icon issue in Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\n// --- Internal Components ---\r\n\r\nconst DashboardHeader = ({ profile }) => {\r\n    const today = new Date().toLocaleDateString(\"en-US\", { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n\r\n    return (\r\n        <div className=\"bg-gradient-to-r from-indigo-600 to-blue-500 rounded-2xl p-8 text-white mb-8 shadow-lg flex justify-between items-center flex-wrap gap-4\">\r\n            <div>\r\n                <h1 className=\"text-3xl font-bold mb-2\">\r\n                    Welcome back, {profile?.name?.split(' ')[0] || \"Employee\"}!\r\n                </h1>\r\n                <div className=\"flex gap-6 text-sm opacity-90\">\r\n                    <span>Department: <strong>{profile?.employee?.department?.name || \"N/A\"}</strong></span>\r\n                    <span>Designation: <strong>{profile?.employee?.designation?.name || \"N/A\"}</strong></span>\r\n                </div>\r\n            </div>\r\n            <div className=\"text-right bg-white/10 px-5 py-3 rounded-xl backdrop-blur-sm\">\r\n                <div className=\"text-sm opacity-80 mb-1\">Today is</div>\r\n                <div className=\"text-lg font-semibold\">{today}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AttendanceActionCard = ({ attendance, onCheckIn, onCheckOut, loading }) => {\r\n    const isCheckedIn = !!attendance?.check_in;\r\n    const isCheckedOut = !!attendance?.check_out;\r\n    const status = attendance?.status || \"Not Marked\";\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-8 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Today's Attendance</h3>\r\n                <span className={`px-3 py-1 rounded-full text-sm font-medium ${status === \"Present\"\r\n                    ? \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\"\r\n                    : \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\"\r\n                    }`}>\r\n                    {status}\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\r\n                <div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Check In</div>\r\n                    <div className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                        {attendance?.check_in ? formatTime(attendance.check_in) : \"--:--\"}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Check Out</div>\r\n                    <div className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                        {attendance?.check_out ? formatTime(attendance.check_out) : \"--:--\"}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Duration</div>\r\n                    <div className=\"text-xl font-semibold text-indigo-600 dark:text-indigo-400\">\r\n                        {calculateHours(attendance?.check_in, attendance?.check_out)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <button\r\n                    onClick={onCheckIn}\r\n                    disabled={loading || isCheckedIn}\r\n                    className={`py-3.5 rounded-xl font-semibold text-base transition-all duration-200 ${isCheckedIn\r\n                        ? \"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed\"\r\n                        : \"bg-emerald-500 hover:bg-emerald-600 text-white shadow-md hover:shadow-lg\"\r\n                        }`}\r\n                >\r\n                    {isCheckedIn ? \"Checked In\" : \"Check In\"}\r\n                </button>\r\n                <button\r\n                    onClick={onCheckOut}\r\n                    disabled={loading || !isCheckedIn || isCheckedOut}\r\n                    className={`py-3.5 rounded-xl font-semibold text-base transition-all duration-200 ${(!isCheckedIn || isCheckedOut)\r\n                        ? \"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed\"\r\n                        : \"bg-rose-500 hover:bg-rose-600 text-white shadow-md hover:shadow-lg\"\r\n                        }`}\r\n                >\r\n                    {isCheckedOut ? \"Checked Out\" : \"Check Out\"}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RecentActivitySection = ({ leaves, announcements, payslips, navigate }) => (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* Recent Leaves */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Leave Summary</h3>\r\n                <button onClick={() => navigate(\"/employee/leaves\")} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors\">View All</button>\r\n            </div>\r\n            {leaves.length > 0 ? (\r\n                <div className=\"flex flex-col gap-4\">\r\n                    {leaves.map(leave => (\r\n                        <div key={leave.id} className=\"flex justify-between items-center pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0 last:pb-0\">\r\n                            <div>\r\n                                <div className=\"font-medium text-gray-800 dark:text-gray-200\">{leave.leave_type?.name || \"Leave\"}</div>\r\n                                <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\r\n                                    {new Date(leave.start_date).toLocaleDateString()} - {new Date(leave.end_date).toLocaleDateString()}\r\n                                </div>\r\n                            </div>\r\n                            <span className={`px-2 py-1 rounded text-xs font-semibold ${leave.status === \"Approved\" ? \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\" :\r\n                                leave.status === \"Rejected\" ? \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\" :\r\n                                    \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\"\r\n                                }`}>\r\n                                {leave.status}\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center text-gray-400 py-4\">No recent leaves</div>\r\n            )}\r\n        </div>\r\n\r\n        {/* Recent Announcements */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Announcements</h3>\r\n                <button onClick={() => navigate(\"/employee/announcements\")} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors\">View All</button>\r\n            </div>\r\n            {announcements.length > 0 ? (\r\n                <div className=\"flex flex-col gap-4\">\r\n                    {announcements.map(ann => (\r\n                        <div key={ann.id} className=\"pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0 last:pb-0\">\r\n                            <div className=\"font-medium text-gray-800 dark:text-gray-200 mb-1\">{ann.title}</div>\r\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400\">{new Date(ann.created_at).toLocaleDateString()}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center text-gray-400 py-4\">No announcements</div>\r\n            )}\r\n        </div>\r\n\r\n        {/* Recent Payslips */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Recent Payslips</h3>\r\n                <button onClick={() => navigate(\"/employee/payslips\")} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors\">View All</button>\r\n            </div>\r\n            {payslips.length > 0 ? (\r\n                <div className=\"flex flex-col gap-3\">\r\n                    {payslips.map(payslip => (\r\n                        <div key={payslip.id} className=\"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                            <div>\r\n                                <div className=\"font-semibold text-gray-700 dark:text-gray-200 text-sm\">\r\n                                    {new Date(0, payslip.month - 1).toLocaleString('default', { month: 'short' })} {payslip.year}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"font-bold text-emerald-600 dark:text-emerald-400\">\r\n                                ‚Çπ{Number(payslip.net_pay || 0).toLocaleString()}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center text-gray-400 py-4\">No payslips found</div>\r\n            )}\r\n        </div>\r\n    </div>\r\n);\r\n\r\n// --- Main Component ---\r\n\r\nconst DashboardPage = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [data, setData] = useState({\r\n        profile: null,\r\n        attendance: null,\r\n        announcements: [],\r\n        leaves: [],\r\n        payslips: []\r\n    });\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [actionLoading, setActionLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [currentLocation, setCurrentLocation] = useState(null);\r\n    const [showLocationModal, setShowLocationModal] = useState(false);\r\n    const [pendingAction, setPendingAction] = useState(null); // 'check-in' or 'check-out'\r\n\r\n    // Face Enrollment State\r\n    const [showFaceEnrollment, setShowFaceEnrollment] = useState(false);\r\n    const [faceEnrollmentSuccess, setFaceEnrollmentSuccess] = useState(false);\r\n\r\n    const isSecureContext = typeof window !== 'undefined' ? window.isSecureContext : false;\r\n\r\n    // Fetch all dashboard data\r\n    const fetchDashboardData = async () => {\r\n        try {\r\n            // Fetch Profile (User Info)\r\n            const profileRes = await api.get(\"/user\");\r\n\r\n            // Fetch Announcements\r\n            const announcementsRes = await api.get(\"/announcements\");\r\n            const announcementsData = announcementsRes.data.data || announcementsRes.data; // Handle pagination\r\n\r\n            // Fetch Leaves\r\n            let leavesData = [];\r\n            try {\r\n                const leavesRes = await api.get(\"/my-leaves\");\r\n                leavesData = leavesRes.data;\r\n            } catch (error) {\r\n                console.warn(\"Failed to fetch leaves:\", error);\r\n            }\r\n\r\n            // Fetch Payslips (Handle 403 if access restricted)\r\n            let payslipsData = [];\r\n            try {\r\n                const payslipsRes = await api.get(\"/my-payslips\");\r\n                payslipsData = payslipsRes.data;\r\n            } catch (error) {\r\n                // If 403, it means access is restricted, which is expected for some employees\r\n                if (error.response?.status !== 403) {\r\n                    console.warn(\"Failed to fetch payslips:\", error);\r\n                }\r\n            }\r\n\r\n            // Fetch Attendance (Get All and find today, or assume API returns today)\r\n            // Using /my-attendance which returns list. finding today.\r\n            const attendanceRes = await api.get(\"/my-attendance\");\r\n            const todayStr = new Date().toISOString().split('T')[0];\r\n            const attendanceList = attendanceRes.data.data || attendanceRes.data; // Handle pagination if any\r\n\r\n            let todayAttendance = null;\r\n            if (Array.isArray(attendanceList)) {\r\n                todayAttendance = attendanceList.find(a => a.date === todayStr) || null;\r\n            }\r\n\r\n            setData({\r\n                profile: profileRes.data,\r\n                attendance: todayAttendance, // Object or null\r\n                announcements: Array.isArray(announcementsData) ? announcementsData.slice(0, 3) : [],\r\n                leaves: Array.isArray(leavesData) ? leavesData.slice(0, 5) : [],\r\n                payslips: Array.isArray(payslipsData) ? payslipsData.slice(0, 3) : []\r\n            });\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error(\"Dashboard fetch error:\", err);\r\n            // Only set fatal error if core profile/attendance fails\r\n            setError(\"Failed to load dashboard. Please try refreshing.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    // Prevent body scroll when modal is open\r\n    useEffect(() => {\r\n        if (showLocationModal) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'unset';\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [showLocationModal]);\r\n\r\n    // Get Location - REQUIRED, no fallback\r\n    const getLocation = () => {\r\n        return new Promise((resolve, reject) => {\r\n            if (!isSecureContext) {\r\n                reject(\r\n                    new Error(\r\n                        'Location requires a secure context. Open the app on http://localhost:3000 (or use HTTPS).'\r\n                    )\r\n                );\r\n                return;\r\n            }\r\n\r\n            console.log(\"üîç Checking geolocation support...\");\r\n\r\n            if (!navigator.geolocation) {\r\n                console.error(\"‚ùå Geolocation not supported\");\r\n                reject(new Error(\"Geolocation is not supported by your browser. Please use a modern browser to check in.\"));\r\n                return;\r\n            }\r\n\r\n            console.log(\"‚úÖ Geolocation supported, requesting permission...\");\r\n\r\n            // Helpful diagnostic (does not trigger prompt)\r\n            if (navigator.permissions?.query) {\r\n                navigator.permissions\r\n                    .query({ name: 'geolocation' })\r\n                    .then((status) => {\r\n                        console.log('üß≠ Geolocation permission state:', status.state);\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log('üß≠ Geolocation permission query failed:', e);\r\n                    });\r\n            }\r\n\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    console.log(\"‚úÖ Location obtained:\", position.coords);\r\n                    const location = {\r\n                        latitude: position.coords.latitude,\r\n                        longitude: position.coords.longitude\r\n                    };\r\n                    setCurrentLocation(location);\r\n                    resolve(location);\r\n                },\r\n                (error) => {\r\n                    console.error(\"‚ùå Location error:\", error.code, error.message);\r\n                    let errorMessage = \"Location access denied. Please allow location access to check in.\";\r\n\r\n                    if (error.code === error.PERMISSION_DENIED) {\r\n                        errorMessage = \"Location permission denied. You must allow location access to check in/out.\";\r\n                    } else if (error.code === error.POSITION_UNAVAILABLE) {\r\n                        errorMessage = \"Location information unavailable. Please try again.\";\r\n                    } else if (error.code === error.TIMEOUT) {\r\n                        errorMessage = \"Location request timed out. Please try again.\";\r\n                    }\r\n\r\n                    reject(new Error(errorMessage));\r\n                },\r\n                {\r\n                    timeout: 15000,\r\n                    enableHighAccuracy: true,\r\n                    maximumAge: 0\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    // Get Device Information\r\n    const getDeviceInfo = () => {\r\n        const ua = navigator.userAgent;\r\n        let deviceType = 'Desktop';\r\n\r\n        if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\r\n            deviceType = 'Tablet';\r\n        } else if (/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\r\n            deviceType = 'Mobile';\r\n        }\r\n\r\n        // Extract browser name\r\n        let browser = 'Unknown';\r\n        if (ua.indexOf('Firefox') > -1) browser = 'Firefox';\r\n        else if (ua.indexOf('Chrome') > -1) browser = 'Chrome';\r\n        else if (ua.indexOf('Safari') > -1) browser = 'Safari';\r\n        else if (ua.indexOf('Edge') > -1) browser = 'Edge';\r\n        else if (ua.indexOf('MSIE') > -1 || ua.indexOf('Trident') > -1) browser = 'IE';\r\n\r\n        // Generate a device ID (stored in localStorage)\r\n        let deviceId = localStorage.getItem('device_id');\r\n        if (!deviceId) {\r\n            deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n            localStorage.setItem('device_id', deviceId);\r\n        }\r\n\r\n        return {\r\n            device_id: deviceId,\r\n            device_type: deviceType,\r\n            browser: browser\r\n        };\r\n    };\r\n\r\n    // Attendance Actions with Location\r\n    const handleAttendanceAction = async (type) => {\r\n        console.log(type === \"check-in\" ? \"üîµ Check-in clicked from dashboard\" : \"üî¥ Check-out clicked from dashboard\");\r\n\r\n        // Check if current time is after 9:00 PM for checkout\r\n        if (type === \"check-out\") {\r\n            const currentHour = new Date().getHours();\r\n            if (currentHour >= 21) { // 21:00 = 9:00 PM\r\n                alert(\"Checkout is not allowed after 9:00 PM. Please contact HR/Admin/SuperAdmin for assistance.\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        try {\r\n            setPendingAction(type);\r\n\r\n            console.log(\"üìç Requesting location for\", type);\r\n            // Request location permission immediately - this triggers browser prompt\r\n            const location = await getLocation();\r\n\r\n            console.log(\"‚úÖ Location received, showing modal:\", location);\r\n            // If successful, show modal with map\r\n            setShowLocationModal(true);\r\n        } catch (err) {\r\n            console.error(\"‚ùå Location error:\", err);\r\n            alert(\"Location Error: \" + (err?.message || \"Please enable location access in browser settings\"));\r\n            setPendingAction(null);\r\n        }\r\n    };\r\n\r\n    // Proceed with Check In/Out after location confirmation\r\n    const proceedWithAction = async () => {\r\n        try {\r\n            setActionLoading(true);\r\n            setShowLocationModal(false);\r\n\r\n            // Location already captured, just get device info\r\n            const deviceInfo = getDeviceInfo();\r\n\r\n            let payload, endpoint;\r\n\r\n            if (pendingAction === \"check-in\") {\r\n                payload = {\r\n                    latitude: currentLocation.latitude,\r\n                    longitude: currentLocation.longitude,\r\n                    force_checkin: true,\r\n                    ...deviceInfo\r\n                };\r\n                endpoint = \"/my-attendance/check-in\";\r\n            } else {\r\n                payload = {\r\n                    check_out_latitude: currentLocation.latitude,\r\n                    check_out_longitude: currentLocation.longitude,\r\n                };\r\n                endpoint = \"/my-attendance/check-out\";\r\n            }\r\n\r\n            await api.post(endpoint, payload);\r\n\r\n            // Refresh data\r\n            await fetchDashboardData();\r\n            alert(`${pendingAction === \"check-in\" ? \"Checked in\" : \"Checked out\"} successfully at your current location!`);\r\n        } catch (err) {\r\n            console.error(`${pendingAction} error:`, err);\r\n\r\n            // Check if it's a time restriction error\r\n            if (err.response?.data?.error === 'checkout_restricted') {\r\n                alert(err.response.data.message || \"Checkout is not allowed after 9:00 PM. Please contact HR/Admin/SuperAdmin.\");\r\n            } else {\r\n                alert(err?.response?.data?.message || `Failed to ${pendingAction}`);\r\n            }\r\n        } finally {\r\n            setActionLoading(false);\r\n            setPendingAction(null);\r\n            setCurrentLocation(null);\r\n        }\r\n    };\r\n\r\n    // Handle Face Enrollment\r\n    const handleFaceEnrolled = async (descriptor, blob) => {\r\n        try {\r\n            setIsLoading(true);\r\n\r\n            // Send face descriptor to backend\r\n            const response = await api.post('/employee/enroll-face', {\r\n                face_descriptor: JSON.stringify(descriptor)\r\n            });\r\n\r\n            // Success!\r\n            setFaceEnrollmentSuccess(true);\r\n            setShowFaceEnrollment(false);\r\n            alert(response.data.message || 'Face enrolled successfully! You can now use face authentication for quick sign-in.');\r\n\r\n            // Refresh profile to update face enrollment status\r\n            await fetchDashboardData();\r\n        } catch (err) {\r\n            console.error('Face enrollment error:', err);\r\n            alert(err.response?.data?.message || 'Failed to enroll face. Please try again.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-screen text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 transition-colors\">\r\n                <div className=\"text-xl font-medium animate-pulse\">Loading Dashboard...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!data.profile && error) {\r\n        return (\r\n            <div className=\"flex flex-col justify-center items-center h-screen text-red-500 dark:text-red-400 bg-gray-50 dark:bg-gray-900 transition-colors\">\r\n                <div className=\"mb-4\">{error}</div>\r\n                <button onClick={fetchDashboardData} className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\">Retry</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-[1400px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200\">\r\n            <DashboardHeader profile={data.profile} />\r\n\r\n            {/* Attendance Section */}\r\n            <AttendanceActionCard\r\n                attendance={data.attendance}\r\n                onCheckIn={() => handleAttendanceAction(\"check-in\")}\r\n                onCheckOut={() => handleAttendanceAction(\"check-out\")}\r\n                loading={actionLoading}\r\n            />\r\n\r\n            {/* Face Enrollment Button - Show only if not enrolled */}\r\n            {data.profile?.employee && !data.profile.employee.face_descriptor && !faceEnrollmentSuccess && (\r\n                <div className=\"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-6 text-white mb-8 shadow-lg\">\r\n                    <div className=\"flex items-center justify-between flex-wrap gap-4\">\r\n                        <div>\r\n                            <h3 className=\"text-xl font-bold mb-2\">üéØ Quick Sign-In Setup</h3>\r\n                            <p className=\"text-sm opacity-90\">\r\n                                Enroll your face for faster and more secure authentication. This only takes a moment!\r\n                            </p>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setShowFaceEnrollment(true)}\r\n                            className=\"px-6 py-3 bg-white text-purple-600 rounded-xl font-semibold hover:bg-gray-100 transition-all duration-200 shadow-md hover:shadow-lg\"\r\n                        >\r\n                            Enroll Face\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Recent Activity */}\r\n            <RecentActivitySection\r\n                leaves={data.leaves}\r\n                announcements={data.announcements}\r\n                payslips={data.payslips}\r\n                navigate={navigate}\r\n            />\r\n\r\n            {/* Location Permission Modal */}\r\n            {showLocationModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full\">\r\n                        <div className=\"p-5 border-b border-gray-200 dark:border-gray-700\">\r\n                            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                                üìç Location Required\r\n                            </h3>\r\n                            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n                                Confirm your location for attendance tracking\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"p-5 space-y-4\">\r\n                            {/* Map Preview */}\r\n                            {currentLocation && (\r\n                                <div className=\"space-y-2\">\r\n                                    <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">\r\n                                        Your Current Location:\r\n                                    </p>\r\n                                    <div className=\"h-48 rounded-lg overflow-hidden border border-gray-300 dark:border-gray-600\">\r\n                                        <MapContainer\r\n                                            center={[currentLocation.latitude, currentLocation.longitude]}\r\n                                            zoom={15}\r\n                                            style={{ height: '100%', width: '100%' }}\r\n                                            scrollWheelZoom={false}\r\n                                        >\r\n                                            <TileLayer\r\n                                                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n                                                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                                            />\r\n                                            <Marker position={[currentLocation.latitude, currentLocation.longitude]}>\r\n                                                <Popup>\r\n                                                    Your Location<br />\r\n                                                    Lat: {currentLocation.latitude.toFixed(6)}<br />\r\n                                                    Lng: {currentLocation.longitude.toFixed(6)}\r\n                                                </Popup>\r\n                                            </Marker>\r\n                                        </MapContainer>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                        üìå {currentLocation.latitude.toFixed(6)}, {currentLocation.longitude.toFixed(6)}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Info Box */}\r\n                            <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\r\n                                <p className=\"text-xs text-blue-800 dark:text-blue-300\">\r\n                                    <strong>‚ÑπÔ∏è Note:</strong> Your location is captured only during check-in/check-out for attendance verification.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    setShowLocationModal(false);\r\n                                    setPendingAction(null);\r\n                                    setCurrentLocation(null);\r\n                                    setActionLoading(false);\r\n                                }}\r\n                                disabled={actionLoading}\r\n                                className=\"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 bg-transparent border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={proceedWithAction}\r\n                                disabled={actionLoading}\r\n                                className={`px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${pendingAction === 'check-in'\r\n                                    ? 'bg-emerald-600 hover:bg-emerald-700'\r\n                                    : 'bg-rose-600 hover:bg-rose-700'\r\n                                    } text-white shadow-md hover:shadow-lg disabled:opacity-50`}\r\n                            >\r\n                                {actionLoading ? 'Processing...' : `Confirm ${pendingAction === 'check-in' ? 'Check In' : 'Check Out'}`}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Face Enrollment Modal */}\r\n            {showFaceEnrollment && (\r\n                <FaceEnrollment\r\n                    email={data.profile?.email}\r\n                    onFaceEnrolled={handleFaceEnrolled}\r\n                    onClose={() => setShowFaceEnrollment(false)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DashboardPage;\r\n"],"names":["L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","DashboardHeader","_ref","_profile$name","_profile$employee","_profile$employee$dep","_profile$employee2","_profile$employee2$de","profile","today","Date","toLocaleDateString","weekday","year","month","day","_jsxs","className","children","name","split","_jsx","employee","department","designation","AttendanceActionCard","_ref2","attendance","onCheckIn","onCheckOut","loading","isCheckedIn","check_in","isCheckedOut","check_out","status","concat","formatTime","calculateHours","onClick","disabled","RecentActivitySection","_ref3","leaves","announcements","payslips","navigate","length","map","leave","_leave$leave_type","leave_type","start_date","end_date","id","ann","title","created_at","payslip","toLocaleString","Number","net_pay","DashboardPage","_data$profile","_data$profile2","user","useAuth","useNavigate","data","setData","useState","isLoading","setIsLoading","actionLoading","setActionLoading","error","setError","currentLocation","setCurrentLocation","showLocationModal","setShowLocationModal","pendingAction","setPendingAction","showFaceEnrollment","setShowFaceEnrollment","faceEnrollmentSuccess","setFaceEnrollmentSuccess","isSecureContext","window","fetchDashboardData","async","profileRes","api","get","announcementsRes","announcementsData","leavesData","console","warn","payslipsData","_error$response","response","attendanceRes","todayStr","toISOString","attendanceList","todayAttendance","Array","isArray","find","a","date","slice","err","useEffect","document","body","style","overflow","handleAttendanceAction","log","type","getHours","alert","location","Promise","resolve","reject","_navigator$permission","navigator","geolocation","Error","permissions","query","then","state","catch","e","getCurrentPosition","position","coords","latitude","longitude","code","message","errorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","timeout","enableHighAccuracy","maximumAge","face_descriptor","MapContainer","center","zoom","height","width","scrollWheelZoom","TileLayer","attribution","url","Marker","Popup","toFixed","deviceInfo","getDeviceInfo","ua","userAgent","deviceType","test","browser","indexOf","deviceId","localStorage","getItem","now","Math","random","toString","substr","setItem","device_id","device_type","payload","endpoint","_objectSpread","force_checkin","check_out_latitude","check_out_longitude","post","_err$response","_err$response$data","_err$response2","_err$response2$data","FaceEnrollment","email","onFaceEnrolled","descriptor","blob","JSON","stringify","_err$response3","_err$response3$data","onClose"],"sourceRoot":""}