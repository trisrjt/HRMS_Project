"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[795],{7795:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(5043),s=r(8163),n=r(1321),d=r(579);const i=e=>{let{children:t,onClick:r,disabled:a,variant:s="primary",className:n,type:i="button"}=e;return(0,d.jsx)("button",{type:i,onClick:r,disabled:a,className:"px-5 py-2.5 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center ".concat({primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg disabled:bg-blue-300 disabled:shadow-none",secondary:"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",destructive:"bg-red-600 hover:bg-red-700 text-white shadow-md hover:shadow-lg disabled:bg-red-300 disabled:shadow-none",success:"bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg disabled:bg-emerald-300 disabled:shadow-none"}[s]," ").concat(a?"cursor-not-allowed":"cursor-pointer"," ").concat(n),children:t})},l=e=>{let{children:t,className:r}=e;return(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200 ".concat(r),children:t})},o=e=>{let{children:t,variant:r="error"}=e;return(0,d.jsx)("div",{className:"p-4 rounded-lg mb-4 text-sm border ".concat("error"===r?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-700 dark:text-red-400":"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-400"),children:t})},c=e=>{let{isOpen:t,onClose:r,title:a,children:s}=e;return t?(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 backdrop-blur-sm p-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-lg shadow-2xl transform transition-all border border-gray-200 dark:border-gray-700 max-h-[85vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center sticky top-0 bg-white dark:bg-gray-800 z-10",children:[(0,d.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-white",children:a}),(0,d.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors bg-transparent border-none cursor-pointer text-2xl leading-none",children:"\xd7"})]}),(0,d.jsx)("div",{className:"p-4",children:s})]})}):null},x=e=>{const t=new Date;return t.setMonth(e-1),t.toLocaleString("default",{month:"long"})},m=e=>new Date(e).toLocaleDateString(),y=()=>{var e,t,r,y,h,g,p,b,j;const u=(0,s.Zp)(),[k,f]=(0,a.useState)([]),[N,v]=(0,a.useState)(!0),[w,A]=(0,a.useState)(null),[L,_]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{const{data:e}=await n.A.get("/my-payslips"),t=e.data||e;f(Array.isArray(t)?t:[]),A(null)}catch(t){if(t.response&&403===t.response.status){var e;const r=(null===(e=t.response.data)||void 0===e?void 0:e.message)||"You do not have permission to view or download payslips. Please contact your administrator.";A(r)}else console.error("Fetch payslips error:",t),A("Failed to load payslips. Please try again later.");f([])}finally{v(!1)}})();const e=document.createElement("style");return e.textContent="\n@media print {\n    body * {\n        visibility: hidden;\n    }\n    .payslip-container, .payslip-container * {\n        visibility: visible;\n    }\n    .payslip-container {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        background: white !important;\n        color: black !important;\n    }\n    .print\\:hidden {\n        display: none !important;\n    }\n    .print\\:text-black {\n        color: black !important;\n    }\n    .print\\:bg-white {\n        background: white !important;\n    }\n    .print\\:bg-gray-50 {\n        background: #f9fafb !important;\n    }\n    .print\\:text-gray-700 {\n        color: #374151 !important;\n    }\n    .print\\:text-gray-800 {\n        color: #1f2937 !important;\n    }\n    .print\\:border-gray-900 {\n        border-color: #111827 !important;\n    }\n    .print\\:border-gray-300 {\n        border-color: #d1d5db !important;\n    }\n}\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]);return N?(0,d.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400 transition-colors",children:(0,d.jsx)("div",{className:"text-xl font-medium animate-pulse",children:"Loading payslips..."})}):(0,d.jsxs)("div",{className:"p-6 max-w-[1200px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-8 flex-wrap gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Payslips"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"View and download your salary statements"})]}),(0,d.jsx)("div",{className:"flex gap-4",children:(0,d.jsx)(i,{variant:"secondary",onClick:()=>u("/employee/dashboard"),children:"Back to Dashboard"})})]}),w&&(0,d.jsx)(o,{variant:"error",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium",children:w}),w.includes("permission")&&(0,d.jsx)("p",{className:"text-sm mt-1 opacity-90",children:"Your administrator needs to enable payslip access for you from the Admin Portal \u2192 Payslips \u2192 Permissions tab."})]})]})}),(0,d.jsx)(l,{className:"overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Month"}),(0,d.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Year"}),(0,d.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Net Pay"}),(0,d.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Generated On"}),(0,d.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:k.length>0?k.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[(0,d.jsx)("td",{className:"p-4 text-sm font-medium text-gray-900 dark:text-white",children:x(e.month)}),(0,d.jsx)("td",{className:"p-4 text-sm text-gray-700 dark:text-gray-300",children:e.year}),(0,d.jsxs)("td",{className:"p-4 text-sm font-bold text-emerald-600 dark:text-emerald-400",children:["\u20b9",Number(e.net_pay).toFixed(2)]}),(0,d.jsx)("td",{className:"p-4 text-sm text-gray-500 dark:text-gray-400",children:m(e.created_at)}),(0,d.jsx)("td",{className:"p-4 text-sm text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(i,{variant:"secondary",className:"px-3 py-1.5 text-xs",onClick:()=>(e=>{_(e)})(e),children:"View"}),(0,d.jsxs)(i,{variant:"success",className:"px-3 py-1.5 text-xs flex items-center gap-1",onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{openInNewTab:!1};try{var r;const a=await n.A.get("/my-payslips/download",{params:{start_month:e.month,end_month:e.month,year:e.year},responseType:"blob"}),d=(a.headers["content-disposition"]||"").match(/filename="?([^";]+)"?/i),i=d?d[1]:"Payslip_".concat(e.month,"_").concat(e.year,".pdf");if(null!==(r=a.data)&&void 0!==r&&r.type&&"application/pdf"!==a.data.type)try{const e=await a.data.text();throw new Error(e||"Unable to download payslip.")}catch(s){}const l=window.URL.createObjectURL(a.data);if(t.openInNewTab)window.open(l,"_blank","noopener");else{const e=document.createElement("a");e.href=l,e.setAttribute("download",i),document.body.appendChild(e),e.click(),e.remove()}window.URL.revokeObjectURL(l)}catch(d){var a;console.error("Download error:",d);let e=d.message||"Failed to download payslip. Please try again.";if((null===(a=d.response)||void 0===a?void 0:a.data)instanceof Blob)try{e=await d.response.data.text()||e}catch(s){}alert(e)}}(e),children:[(0,d.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})]})})]},e.id)):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"5",className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No payslips found."})})})]})})}),(0,d.jsx)(c,{isOpen:!!L,onClose:()=>_(null),title:"",children:L&&(0,d.jsxs)("div",{className:"payslip-container bg-white dark:bg-gray-800 print:bg-white",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-sm font-bold text-gray-900 dark:text-white print:text-black uppercase",children:"MIND & MATTER MARKETING SOLUTIONS PRIVATE LIMITED"}),(0,d.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 print:text-gray-800",children:"Regd. Office: 360 - Plot No. 5, Block BF, Shanti Pally, Kolkata - 700107"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,d.jsxs)("div",{className:"flex gap-0.5",children:[(0,d.jsx)("div",{className:"w-1.5 h-3 bg-green-600 rounded-sm"}),(0,d.jsx)("div",{className:"w-1.5 h-4 bg-green-600 rounded-sm"}),(0,d.jsx)("div",{className:"w-1.5 h-5 bg-green-600 rounded-sm"})]}),(0,d.jsx)("span",{className:"text-xl font-light",children:"mind & matter"})]})]}),(0,d.jsx)("div",{className:"border-b-2 border-gray-900 dark:border-gray-700 print:border-gray-900 pb-1 mb-3",children:(0,d.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white print:text-black uppercase",children:"SALARY ADVICE"})}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1.5 text-xs mb-4",children:[(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400 print:text-gray-700 w-40",children:"For the month of:"}),(0,d.jsxs)("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:[x(L.month)," ",L.year]})]}),(0,d.jsxs)("div",{className:"flex justify-end",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400 print:text-gray-700 mr-4",children:"Date of Joining:"}),(0,d.jsx)("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:null!==(e=L.employee)&&void 0!==e&&e.date_of_joining?new Date(L.employee.date_of_joining).toLocaleDateString("en-GB"):"N/A"})]}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400 print:text-gray-700 w-40",children:"Employee name:"}),(0,d.jsx)("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:(null===(t=L.employee)||void 0===t||null===(r=t.user)||void 0===r?void 0:r.name)||(null===(y=L.employee)||void 0===y?void 0:y.name)||"N/A"})]}),(0,d.jsxs)("div",{className:"flex justify-end",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400 print:text-gray-700 mr-4",children:"Employee code:"}),(0,d.jsx)("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:(null===(h=L.employee)||void 0===h?void 0:h.employee_code)||"N/A"})]}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400 print:text-gray-700 w-40",children:"Designation:"}),(0,d.jsx)("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:(null===(g=L.employee)||void 0===g||null===(p=g.designation)||void 0===p?void 0:p.name)||(null===(b=L.employee)||void 0===b?void 0:b.designation)||"N/A"})]}),(0,d.jsxs)("div",{className:"flex justify-end",children:[(0,d.jsx)("span",{className:"text-gray-600 dark:text-gray-400 print:text-gray-700 mr-4",children:"Posted at:"}),(0,d.jsx)("span",{className:"text-gray-900 dark:text-white print:text-black font-medium",children:(null===(j=L.employee)||void 0===j?void 0:j.location)||"Shanti Pally, Kol"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"border-b border-gray-900 dark:border-gray-700 print:border-gray-900 pb-1 mb-2 flex justify-between",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white print:text-black text-xs",children:"Particulars"}),(0,d.jsx)("span",{className:"font-medium text-gray-900 dark:text-white print:text-black text-xs",children:"Amount (Rs)"})]}),(0,d.jsxs)("div",{className:"space-y-1.5 text-xs",children:[(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"Basic"}),(0,d.jsx)("span",{children:Number(L.basic).toFixed(2)})]}),(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"HRA"}),(0,d.jsx)("span",{children:Number(L.hra).toFixed(2)})]}),L.allowances>0&&(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"Special Allowance"}),(0,d.jsx)("span",{children:Number(L.allowances||0).toFixed(2)})]}),L.da>0&&(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"DA"}),(0,d.jsx)("span",{children:Number(L.da).toFixed(2)})]}),(0,d.jsx)("div",{className:"h-10"}),(0,d.jsxs)("div",{className:"flex justify-between font-bold pt-2 border-t-2 border-gray-900 dark:border-gray-700 print:border-gray-900 text-gray-900 dark:text-white print:text-black text-base",children:[(0,d.jsx)("span",{children:"Total"}),(0,d.jsx)("span",{children:Number(L.total_earnings).toFixed(2)})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"border-b border-gray-900 dark:border-gray-700 print:border-gray-900 pb-1 mb-2 flex justify-between",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white print:text-black text-xs",children:"Adjustments/deductions:"}),(0,d.jsx)("span",{className:"font-medium text-gray-900 dark:text-white print:text-black text-xs",children:"Amount (Rs)"})]}),(0,d.jsxs)("div",{className:"space-y-1.5 text-xs",children:[L.pf>0?(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"PF"}),(0,d.jsx)("span",{children:Number(L.pf).toFixed(2)})]}):null,L.esic>0?(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"ESIC"}),(0,d.jsx)("span",{children:Number(L.esic).toFixed(2)})]}):null,L.ptax>0?(0,d.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300 print:text-black",children:[(0,d.jsx)("span",{children:"P-Tax"}),(0,d.jsx)("span",{children:Number(L.ptax).toFixed(2)})]}):null,L.pf+L.esic+L.ptax===0&&(0,d.jsx)("div",{className:"text-right text-gray-500 dark:text-gray-400 print:text-gray-600",children:"NA"}),(0,d.jsx)("div",{className:"h-10"}),(0,d.jsxs)("div",{className:"flex justify-between font-bold pt-2 border-t-2 border-gray-900 dark:border-gray-700 print:border-gray-900 text-gray-900 dark:text-white print:text-black text-base",children:[(0,d.jsx)("span",{children:"Bank Transfer"}),(0,d.jsx)("span",{children:Number(L.net_pay).toFixed(2)})]})]})]})]}),(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 print:border-gray-300",children:(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 print:text-gray-700",children:[(0,d.jsxs)("p",{className:"mb-0.5",children:[(0,d.jsx)("strong",{children:"Note:"})," Actual Salary INR ",Math.round(L.total_earnings),"/-"]}),(0,d.jsxs)("p",{children:["INR ",Math.round(L.net_pay)," is ",L.days_worked," day's salary."]})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 print:text-gray-700 mb-6",children:"Authorised Signatory"}),(0,d.jsx)("div",{className:"border-t border-gray-900 dark:border-gray-700 print:border-gray-900 w-32 mx-auto"})]})]})}),(0,d.jsx)("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-900/50 print:bg-gray-50 border-l-4 border-green-600 rounded",children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 print:text-gray-700",children:[(0,d.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white print:text-black mb-1",children:"\ud83d\udd12 DIGITALLY VERIFIED PAYSLIP"}),(0,d.jsxs)("p",{className:"text-xs",children:["Generated on: ",m(L.generated_on||L.created_at)]}),(0,d.jsx)("p",{className:"mt-0.5 text-gray-500 dark:text-gray-500 print:text-gray-600 text-xs",children:"This is an official payslip from Mind & Matter Marketing Solutions Pvt. Ltd."})]}),(0,d.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-full border-2 border-green-600 flex items-center justify-center bg-white print:bg-white",children:(0,d.jsx)("span",{className:"text-2xl text-green-600",children:"\u2713"})})]})}),(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 print:hidden flex justify-end",children:(0,d.jsx)(i,{variant:"secondary",onClick:()=>_(null),children:"Close"})})]})})]})}}}]);
//# sourceMappingURL=795.744ef221.chunk.js.map