"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[921],{5921:(e,r,a)=>{a.r(r),a.d(r,{default:()=>m});var t=a(5043),d=a(9778),s=a(1291),l=a(579);const n=e=>{let{children:r,className:a}=e;return(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200 ".concat(a),children:r})},c=e=>{let{children:r}=e;return(0,l.jsx)("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:r})},i=e=>{let{children:r,className:a}=e;return(0,l.jsx)("div",{className:"p-6 ".concat(a),children:r})},o=e=>{let{children:r}=e;return(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white m-0",children:r})},x=e=>{let{children:r,onClick:a,disabled:t,variant:d="primary",className:s}=e;return(0,l.jsx)("button",{onClick:a,disabled:t,className:"px-5 py-2.5 rounded-lg font-medium text-sm transition-all duration-200 flex items-center justify-center ".concat({primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg disabled:bg-blue-300 disabled:shadow-none",success:"bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg disabled:bg-emerald-300 disabled:shadow-none",outline:"bg-transparent border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",destructive:"bg-red-600 hover:bg-red-700 text-white shadow-md hover:shadow-lg disabled:bg-red-300 disabled:shadow-none"}[d]," ").concat(t?"cursor-not-allowed":"cursor-pointer"," ").concat(s),children:r})},g=e=>{let{children:r,variant:a="error"}=e;return(0,l.jsx)("div",{className:"p-4 rounded-lg mb-4 text-sm border ".concat("error"===a?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-700 dark:text-red-400":"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-400"),children:r})},h=e=>{let{children:r,variant:a="default"}=e;const t={default:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",success:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",danger:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",warning:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",Present:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",Absent:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",Late:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400","Half Day":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},d=t[a]||t.default;return(0,l.jsx)("span",{className:"inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ".concat(d),children:r})},m=()=>{const[e,r]=(0,t.useState)([]),[a,m]=(0,t.useState)(!0),[b,y]=(0,t.useState)(null),[u,k]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[j,v]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[S,C]=(0,t.useState)((new Date).toISOString().slice(0,7)),_=async()=>{try{y(null);const e=await d.A.get("/my-attendance"),a=e.data.data||e.data;r(Array.isArray(a)?a:[])}catch(e){console.error("Fetch error:",e),y("Failed to load attendance records. Please try again later.")}finally{m(!1)}};(0,t.useEffect)(()=>{_()},[]),(0,t.useEffect)(()=>{if(p||u){const e=setTimeout(()=>{f(null),k(null)},3e3);return()=>clearTimeout(e)}},[p,u]);const A=(new Date).toISOString().split("T")[0],D=e.find(e=>new Date(e.date).toISOString().split("T")[0]===A),O=!(null===D||void 0===D||!D.check_in),I=!(null===D||void 0===D||!D.check_out),T=(0,s.xN)(e),F=(0,s.P2)(e,S),L=e.filter(e=>e.date.startsWith(S));return a?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400 transition-colors",children:(0,l.jsx)("div",{className:"text-xl font-medium animate-pulse",children:"Loading attendance..."})}):(0,l.jsxs)("div",{className:"p-6 max-w-[1200px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Attendance"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(x,{onClick:async()=>{try{v(!0),k(null),await d.A.post("/my-attendance/check-in"),f("Checked in successfully!"),await _()}catch(a){var e,r;console.error("Check-in error:",a),k((null===a||void 0===a||null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to check in.")}finally{v(!1)}},disabled:j||O,variant:"success",children:j?"Checking In...":O?"Checked In":"Check In"}),(0,l.jsx)(x,{onClick:async()=>{try{N(!0),k(null),await d.A.post("/my-attendance/check-out"),f("Checked out successfully!"),await _()}catch(a){var e,r;console.error("Check-out error:",a),k((null===a||void 0===a||null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to check out.")}finally{N(!1)}},disabled:w||!O||I,variant:"destructive",children:w?"Checking Out...":I?"Checked Out":"Check Out"})]})]}),u&&(0,l.jsxs)(g,{variant:"error",children:[(0,l.jsx)("strong",{children:"Error:"})," ",u]}),p&&(0,l.jsxs)(g,{variant:"success",children:[(0,l.jsx)("strong",{children:"Success:"})," ",p]}),b&&(0,l.jsx)(g,{variant:"error",children:b})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200",children:[(0,l.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 font-medium uppercase tracking-wide",children:"This Week"}),(0,l.jsxs)("div",{className:"flex items-baseline gap-2 mb-4",children:[(0,l.jsx)("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:T.formatted||"0h 0m"}),(0,l.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"worked"})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4",children:[(0,l.jsxs)("span",{children:["Days: ",(0,l.jsx)("strong",{className:"text-gray-700 dark:text-gray-300",children:T.daysWorked||0})]}),(0,l.jsxs)("span",{children:["Avg: ",(0,l.jsx)("strong",{className:"text-gray-700 dark:text-gray-300",children:T.average||"0h"})," / day"]})]})]}),(0,l.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide",children:"Monthly Overview"}),(0,l.jsx)("input",{type:"month",id:"month-filter",name:"month-filter",value:S,onChange:e=>C(e.target.value),className:"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-sm px-3 py-1 rounded border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"flex items-baseline gap-2 mb-4",children:[(0,l.jsx)("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:F.formatted||"0h 0m"}),(0,l.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"worked"})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4",children:[(0,l.jsxs)("span",{children:["Days: ",(0,l.jsx)("strong",{className:"text-gray-700 dark:text-gray-300",children:F.daysWorked||0})]}),(0,l.jsxs)("span",{children:["Avg: ",(0,l.jsx)("strong",{className:"text-gray-700 dark:text-gray-300",children:F.average||"0h"})," / day"]})]})]})]}),(0,l.jsxs)(n,{className:"overflow-hidden",children:[(0,l.jsx)(c,{children:(0,l.jsxs)(o,{children:["Attendance History (",new Date(S+"-01").toLocaleString("default",{month:"long",year:"numeric"}),")"]})}),(0,l.jsx)(i,{className:"p-0",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,l.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Check In"}),(0,l.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Check Out"}),(0,l.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Hours"}),(0,l.jsx)("th",{className:"p-4 border-b border-gray-200 dark:border-gray-700 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:L.length>0?L.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[(0,l.jsx)("td",{className:"p-4 text-sm font-medium text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,l.jsx)("td",{className:"p-4 text-sm text-gray-700 dark:text-gray-300",children:e.check_in?(0,s.fU)(e.check_in,e.date):"--:--"}),(0,l.jsx)("td",{className:"p-4 text-sm text-gray-700 dark:text-gray-300",children:e.check_out?(0,s.fU)(e.check_out,e.date):"--:--"}),(0,l.jsx)("td",{className:"p-4 text-sm font-semibold text-indigo-600 dark:text-indigo-400",children:(0,s.w_)(e.check_in,e.check_out)}),(0,l.jsx)("td",{className:"p-4 text-sm",children:(0,l.jsx)(h,{variant:e.status,children:e.status})})]},e.id)):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"5",className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No attendance records found for this month."})})})]})})})]})]})}}}]);
//# sourceMappingURL=921.6865ae3e.chunk.js.map