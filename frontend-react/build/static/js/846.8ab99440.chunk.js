"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[846],{8846:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(5043),s=a(8163),n=a(9778),d=a(8729),l=a(1291),i=a(579);const o=e=>{var t,a,r;let{profile:s}=e;const n=(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,i.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-500 rounded-2xl p-8 text-white mb-8 shadow-lg flex justify-between items-center flex-wrap gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",(null===s||void 0===s||null===(t=s.name)||void 0===t?void 0:t.split(" ")[0])||"Employee","!"]}),(0,i.jsxs)("div",{className:"flex gap-6 text-sm opacity-90",children:[(0,i.jsxs)("span",{children:["Department: ",(0,i.jsx)("strong",{children:(null===s||void 0===s||null===(a=s.employee)||void 0===a?void 0:a.department)||"N/A"})]}),(0,i.jsxs)("span",{children:["Designation: ",(0,i.jsx)("strong",{children:(null===s||void 0===s||null===(r=s.employee)||void 0===r?void 0:r.designation)||"N/A"})]})]})]}),(0,i.jsxs)("div",{className:"text-right bg-white/10 px-5 py-3 rounded-xl backdrop-blur-sm",children:[(0,i.jsx)("div",{className:"text-sm opacity-80 mb-1",children:"Today is"}),(0,i.jsx)("div",{className:"text-lg font-semibold",children:n})]})]})},c=e=>{let{attendance:t,onCheckIn:a,onCheckOut:r,loading:s}=e;const n=!(null===t||void 0===t||!t.check_in),d=!(null===t||void 0===t||!t.check_out),o=(null===t||void 0===t?void 0:t.status)||"Not Marked";return(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-8 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Today's Attendance"}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("Present"===o?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:o})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Check In"}),(0,i.jsx)("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:null!==t&&void 0!==t&&t.check_in?(0,l.fU)(t.check_in):"--:--"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Check Out"}),(0,i.jsx)("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:null!==t&&void 0!==t&&t.check_out?(0,l.fU)(t.check_out):"--:--"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Duration"}),(0,i.jsx)("div",{className:"text-xl font-semibold text-indigo-600 dark:text-indigo-400",children:(0,l.w_)(null===t||void 0===t?void 0:t.check_in,null===t||void 0===t?void 0:t.check_out)})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsx)("button",{onClick:a,disabled:s||n,className:"py-3.5 rounded-xl font-semibold text-base transition-all duration-200 ".concat(n?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-600 text-white shadow-md hover:shadow-lg"),children:n?"Checked In":"Check In"}),(0,i.jsx)("button",{onClick:r,disabled:s||!n||d,className:"py-3.5 rounded-xl font-semibold text-base transition-all duration-200 ".concat(!n||d?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-rose-500 hover:bg-rose-600 text-white shadow-md hover:shadow-lg"),children:d?"Checked Out":"Check Out"})]})]})},x=e=>{let{leaves:t,announcements:a,payslips:r,navigate:s}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Leave Summary"}),(0,i.jsx)("button",{onClick:()=>s("/employee/leaves"),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors",children:"View All"})]}),t.length>0?(0,i.jsx)("div",{className:"flex flex-col gap-4",children:t.map(e=>{var t;return(0,i.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0 last:pb-0",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:(null===(t=e.leave_type)||void 0===t?void 0:t.name)||"Leave"}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]})]}),(0,i.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Approved"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"Rejected"===e.status?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"),children:e.status})]},e.id)})}):(0,i.jsx)("div",{className:"text-center text-gray-400 py-4",children:"No recent leaves"})]}),(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Announcements"}),(0,i.jsx)("button",{onClick:()=>s("/employee/announcements"),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors",children:"View All"})]}),a.length>0?(0,i.jsx)("div",{className:"flex flex-col gap-4",children:a.map(e=>(0,i.jsxs)("div",{className:"pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0 last:pb-0",children:[(0,i.jsx)("div",{className:"font-medium text-gray-800 dark:text-gray-200 mb-1",children:e.title}),(0,i.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]},e.id))}):(0,i.jsx)("div",{className:"text-center text-gray-400 py-4",children:"No announcements"})]}),(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Payslips"}),(0,i.jsx)("button",{onClick:()=>s("/employee/payslips"),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors",children:"View All"})]}),r.length>0?(0,i.jsx)("div",{className:"flex flex-col gap-3",children:r.map(e=>(0,i.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"font-semibold text-gray-700 dark:text-gray-200 text-sm",children:[new Date(0,e.month-1).toLocaleString("default",{month:"short"})," ",e.year]})}),(0,i.jsxs)("div",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:["\u20b9",Number(e.net_pay||0).toLocaleString()]})]},e.id))}):(0,i.jsx)("div",{className:"text-center text-gray-400 py-4",children:"No payslips found"})]})]})},g=()=>{const{user:e}=(0,d.A)(),t=(0,s.Zp)(),[a,l]=(0,r.useState)({profile:null,attendance:null,announcements:[],leaves:[],payslips:[]}),[g,m]=(0,r.useState)(!0),[h,y]=(0,r.useState)(!1),[b,u]=(0,r.useState)(null),v=async()=>{try{const e=await n.A.get("/user"),t=await n.A.get("/announcements"),a=t.data.data||t.data,r=await n.A.get("/my-leaves"),s=await n.A.get("/my-payslips"),d=await n.A.get("/my-attendance"),i=(new Date).toISOString().split("T")[0],o=d.data.data||d.data;let c=null;Array.isArray(o)&&(c=o.find(e=>e.date===i)||null),l({profile:e.data,attendance:c,announcements:Array.isArray(a)?a.slice(0,3):[],leaves:Array.isArray(r.data)?r.data.slice(0,5):[],payslips:Array.isArray(s.data)?s.data.slice(0,3):[]}),u(null)}catch(e){console.error("Dashboard fetch error:",e)}finally{m(!1)}};(0,r.useEffect)(()=>{v()},[]);const k=async e=>{try{y(!0);const t="check-in"===e?"/my-attendance/check-in":"/my-attendance/check-out";await n.A.post(t),await v()}catch(r){var t,a;alert((null===r||void 0===r||null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to ".concat(e))}finally{y(!1)}};return g?(0,i.jsx)("div",{className:"flex justify-center items-center h-screen text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 transition-colors",children:(0,i.jsx)("div",{className:"text-xl font-medium animate-pulse",children:"Loading Dashboard..."})}):!a.profile&&b?(0,i.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen text-red-500 dark:text-red-400 bg-gray-50 dark:bg-gray-900 transition-colors",children:[(0,i.jsx)("div",{className:"mb-4",children:b}),(0,i.jsx)("button",{onClick:v,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Retry"})]}):(0,i.jsxs)("div",{className:"p-8 max-w-[1400px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200",children:[(0,i.jsx)(o,{profile:a.profile}),(0,i.jsx)(c,{attendance:a.attendance,onCheckIn:()=>k("check-in"),onCheckOut:()=>k("check-out"),loading:h}),(0,i.jsx)(x,{leaves:a.leaves,announcements:a.announcements,payslips:a.payslips,navigate:t})]})}}}]);
//# sourceMappingURL=846.8ab99440.chunk.js.map