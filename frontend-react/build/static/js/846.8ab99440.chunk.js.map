{"version":3,"file":"static/js/846.8ab99440.chunk.js","mappings":"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","sources":["pages/employees/DashboardPage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../../api/axios\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { formatTime, calculateHours, calculateWeeklyStats, calculateMonthlyStats } from \"../../utils/dateUtils\";\r\n\r\n// --- Internal Components ---\r\n\r\nconst DashboardHeader = ({ profile }) => {\r\n    const today = new Date().toLocaleDateString(\"en-US\", { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n\r\n    return (\r\n        <div className=\"bg-gradient-to-r from-indigo-600 to-blue-500 rounded-2xl p-8 text-white mb-8 shadow-lg flex justify-between items-center flex-wrap gap-4\">\r\n            <div>\r\n                <h1 className=\"text-3xl font-bold mb-2\">\r\n                    Welcome back, {profile?.name?.split(' ')[0] || \"Employee\"}!\r\n                </h1>\r\n                <div className=\"flex gap-6 text-sm opacity-90\">\r\n                    <span>Department: <strong>{profile?.employee?.department || \"N/A\"}</strong></span>\r\n                    <span>Designation: <strong>{profile?.employee?.designation || \"N/A\"}</strong></span>\r\n                </div>\r\n            </div>\r\n            <div className=\"text-right bg-white/10 px-5 py-3 rounded-xl backdrop-blur-sm\">\r\n                <div className=\"text-sm opacity-80 mb-1\">Today is</div>\r\n                <div className=\"text-lg font-semibold\">{today}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AttendanceActionCard = ({ attendance, onCheckIn, onCheckOut, loading }) => {\r\n    const isCheckedIn = !!attendance?.check_in;\r\n    const isCheckedOut = !!attendance?.check_out;\r\n    const status = attendance?.status || \"Not Marked\";\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-8 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Today's Attendance</h3>\r\n                <span className={`px-3 py-1 rounded-full text-sm font-medium ${status === \"Present\"\r\n                        ? \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\"\r\n                        : \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\"\r\n                    }`}>\r\n                    {status}\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\r\n                <div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Check In</div>\r\n                    <div className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                        {attendance?.check_in ? formatTime(attendance.check_in) : \"--:--\"}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Check Out</div>\r\n                    <div className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                        {attendance?.check_out ? formatTime(attendance.check_out) : \"--:--\"}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Duration</div>\r\n                    <div className=\"text-xl font-semibold text-indigo-600 dark:text-indigo-400\">\r\n                        {calculateHours(attendance?.check_in, attendance?.check_out)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <button\r\n                    onClick={onCheckIn}\r\n                    disabled={loading || isCheckedIn}\r\n                    className={`py-3.5 rounded-xl font-semibold text-base transition-all duration-200 ${isCheckedIn\r\n                            ? \"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed\"\r\n                            : \"bg-emerald-500 hover:bg-emerald-600 text-white shadow-md hover:shadow-lg\"\r\n                        }`}\r\n                >\r\n                    {isCheckedIn ? \"Checked In\" : \"Check In\"}\r\n                </button>\r\n                <button\r\n                    onClick={onCheckOut}\r\n                    disabled={loading || !isCheckedIn || isCheckedOut}\r\n                    className={`py-3.5 rounded-xl font-semibold text-base transition-all duration-200 ${(!isCheckedIn || isCheckedOut)\r\n                            ? \"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed\"\r\n                            : \"bg-rose-500 hover:bg-rose-600 text-white shadow-md hover:shadow-lg\"\r\n                        }`}\r\n                >\r\n                    {isCheckedOut ? \"Checked Out\" : \"Check Out\"}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RecentActivitySection = ({ leaves, announcements, payslips, navigate }) => (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* Recent Leaves */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Leave Summary</h3>\r\n                <button onClick={() => navigate(\"/employee/leaves\")} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors\">View All</button>\r\n            </div>\r\n            {leaves.length > 0 ? (\r\n                <div className=\"flex flex-col gap-4\">\r\n                    {leaves.map(leave => (\r\n                        <div key={leave.id} className=\"flex justify-between items-center pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0 last:pb-0\">\r\n                            <div>\r\n                                <div className=\"font-medium text-gray-800 dark:text-gray-200\">{leave.leave_type?.name || \"Leave\"}</div>\r\n                                <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\r\n                                    {new Date(leave.start_date).toLocaleDateString()} - {new Date(leave.end_date).toLocaleDateString()}\r\n                                </div>\r\n                            </div>\r\n                            <span className={`px-2 py-1 rounded text-xs font-semibold ${leave.status === \"Approved\" ? \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\" :\r\n                                    leave.status === \"Rejected\" ? \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\" :\r\n                                        \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\"\r\n                                }`}>\r\n                                {leave.status}\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center text-gray-400 py-4\">No recent leaves</div>\r\n            )}\r\n        </div>\r\n\r\n        {/* Recent Announcements */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Announcements</h3>\r\n                <button onClick={() => navigate(\"/employee/announcements\")} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors\">View All</button>\r\n            </div>\r\n            {announcements.length > 0 ? (\r\n                <div className=\"flex flex-col gap-4\">\r\n                    {announcements.map(ann => (\r\n                        <div key={ann.id} className=\"pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0 last:pb-0\">\r\n                            <div className=\"font-medium text-gray-800 dark:text-gray-200 mb-1\">{ann.title}</div>\r\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400\">{new Date(ann.created_at).toLocaleDateString()}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center text-gray-400 py-4\">No announcements</div>\r\n            )}\r\n        </div>\r\n\r\n        {/* Recent Payslips */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 transition-colors duration-200\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Recent Payslips</h3>\r\n                <button onClick={() => navigate(\"/employee/payslips\")} className=\"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm transition-colors\">View All</button>\r\n            </div>\r\n            {payslips.length > 0 ? (\r\n                <div className=\"flex flex-col gap-3\">\r\n                    {payslips.map(payslip => (\r\n                        <div key={payslip.id} className=\"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                            <div>\r\n                                <div className=\"font-semibold text-gray-700 dark:text-gray-200 text-sm\">\r\n                                    {new Date(0, payslip.month - 1).toLocaleString('default', { month: 'short' })} {payslip.year}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"font-bold text-emerald-600 dark:text-emerald-400\">\r\n                                â‚¹{Number(payslip.net_pay || 0).toLocaleString()}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center text-gray-400 py-4\">No payslips found</div>\r\n            )}\r\n        </div>\r\n    </div>\r\n);\r\n\r\n// --- Main Component ---\r\n\r\nconst DashboardPage = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [data, setData] = useState({\r\n        profile: null,\r\n        attendance: null,\r\n        announcements: [],\r\n        leaves: [],\r\n        payslips: []\r\n    });\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [actionLoading, setActionLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Fetch all dashboard data\r\n    const fetchDashboardData = async () => {\r\n        try {\r\n            // Fetch Profile (User Info)\r\n            const profileRes = await api.get(\"/user\");\r\n\r\n            // Fetch Announcements\r\n            const announcementsRes = await api.get(\"/announcements\");\r\n            const announcementsData = announcementsRes.data.data || announcementsRes.data; // Handle pagination\r\n\r\n            // Fetch Leaves\r\n            const leavesRes = await api.get(\"/my-leaves\");\r\n\r\n            // Fetch Payslips\r\n            const payslipsRes = await api.get(\"/my-payslips\");\r\n\r\n            // Fetch Attendance (Get All and find today, or assume API returns today)\r\n            // Using /my-attendance which returns list. finding today.\r\n            const attendanceRes = await api.get(\"/my-attendance\");\r\n            const todayStr = new Date().toISOString().split('T')[0];\r\n            const attendanceList = attendanceRes.data.data || attendanceRes.data; // Handle pagination if any\r\n\r\n            let todayAttendance = null;\r\n            if (Array.isArray(attendanceList)) {\r\n                todayAttendance = attendanceList.find(a => a.date === todayStr) || null;\r\n            }\r\n\r\n            setData({\r\n                profile: profileRes.data,\r\n                attendance: todayAttendance, // Object or null\r\n                announcements: Array.isArray(announcementsData) ? announcementsData.slice(0, 3) : [],\r\n                leaves: Array.isArray(leavesRes.data) ? leavesRes.data.slice(0, 5) : [],\r\n                payslips: Array.isArray(payslipsRes.data) ? payslipsRes.data.slice(0, 3) : []\r\n            });\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error(\"Dashboard fetch error:\", err);\r\n            // setError(\"Failed to load dashboard data. Please try again.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    // Attendance Actions\r\n    const handleAttendanceAction = async (type) => {\r\n        try {\r\n            setActionLoading(true);\r\n            const endpoint = type === \"check-in\" ? \"/my-attendance/check-in\" : \"/my-attendance/check-out\";\r\n            await api.post(endpoint);\r\n            // Refresh data\r\n            await fetchDashboardData();\r\n        } catch (err) {\r\n            alert(err?.response?.data?.message || `Failed to ${type}`);\r\n        } finally {\r\n            setActionLoading(false);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-screen text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 transition-colors\">\r\n                <div className=\"text-xl font-medium animate-pulse\">Loading Dashboard...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!data.profile && error) {\r\n        return (\r\n            <div className=\"flex flex-col justify-center items-center h-screen text-red-500 dark:text-red-400 bg-gray-50 dark:bg-gray-900 transition-colors\">\r\n                <div className=\"mb-4\">{error}</div>\r\n                <button onClick={fetchDashboardData} className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\">Retry</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-[1400px] mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200\">\r\n            <DashboardHeader profile={data.profile} />\r\n\r\n            {/* Attendance Section */}\r\n            <AttendanceActionCard\r\n                attendance={data.attendance}\r\n                onCheckIn={() => handleAttendanceAction(\"check-in\")}\r\n                onCheckOut={() => handleAttendanceAction(\"check-out\")}\r\n                loading={actionLoading}\r\n            />\r\n\r\n            {/* Recent Activity */}\r\n            <RecentActivitySection\r\n                leaves={data.leaves}\r\n                announcements={data.announcements}\r\n                payslips={data.payslips}\r\n                navigate={navigate}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DashboardPage;\r\n"],"names":["DashboardHeader","_ref","_profile$name","_profile$employee","_profile$employee2","profile","today","Date","toLocaleDateString","weekday","year","month","day","_jsxs","className","children","name","split","_jsx","employee","department","designation","AttendanceActionCard","_ref2","attendance","onCheckIn","onCheckOut","loading","isCheckedIn","check_in","isCheckedOut","check_out","status","concat","formatTime","calculateHours","onClick","disabled","RecentActivitySection","_ref3","leaves","announcements","payslips","navigate","length","map","leave","_leave$leave_type","leave_type","start_date","end_date","id","ann","title","created_at","payslip","toLocaleString","Number","net_pay","DashboardPage","user","useAuth","useNavigate","data","setData","useState","isLoading","setIsLoading","actionLoading","setActionLoading","error","setError","fetchDashboardData","async","profileRes","api","get","announcementsRes","announcementsData","leavesRes","payslipsRes","attendanceRes","todayStr","toISOString","attendanceList","todayAttendance","Array","isArray","find","a","date","slice","err","console","useEffect","handleAttendanceAction","endpoint","type","post","_err$response","_err$response$data","alert","response","message"],"sourceRoot":""}