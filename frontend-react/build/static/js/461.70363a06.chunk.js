"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[461],{1099:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(9379),s=a(5043),i=a(7819),n=a(2054),d=a(1360),o=a(9292),l=a(614),c=a(9778),g=a(8729),x=a(579);const u=()=>{var e;const{user:t}=(0,g.A)(),[a,u]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[b,p]=(0,s.useState)(""),[y,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)("create"),[k,w]=(0,s.useState)(null),[N,A]=(0,s.useState)({name:"",description:"",is_active:!0}),[_,S]=(0,s.useState)({}),[C,D]=(0,s.useState)(!1),[z,F]=(0,s.useState)(null),E=1===(null===t||void 0===t?void 0:t.role_id)||2===(null===t||void 0===t?void 0:t.role_id)||3===(null===t||void 0===t?void 0:t.role_id)||(null===t||void 0===t||null===(e=t.permissions)||void 0===e?void 0:e.includes("can_manage_designations"))||(null===t||void 0===t?void 0:t.can_manage_designations),L=async()=>{h(!0);try{const e=await c.A.get("/designations");u(e.data)}catch(e){console.error("Error fetching designations:",e),O("error","Failed to fetch designations.")}finally{h(!1)}};(0,s.useEffect)(()=>{L()},[]);const O=(e,t)=>{F({type:e,message:t}),setTimeout(()=>F(null),3e3)},q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;j(e),w(t),A({name:t?t.name:"",description:(null===t||void 0===t?void 0:t.description)||"",is_active:!t||t.is_active}),S({}),f(!0)},I=()=>{f(!1),w(null)},T=a.filter(e=>e.name.toLowerCase().includes(b.toLowerCase()));return(0,x.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center p-6 border-b bg-white dark:bg-gray-800 dark:border-gray-700 shadow-sm",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Designations"}),(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Define hierarchy and organizational titles"})]}),E&&(0,x.jsxs)("button",{onClick:()=>q("create"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded shadow transition duration-150 ease-in-out",children:[(0,x.jsx)(d.A,{size:18}),"Add Designation"]})]}),(0,x.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[z&&(0,x.jsxs)("div",{className:"mb-4 p-4 rounded-lg flex items-center gap-2 shadow-sm ".concat("success"===z.type?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:["success"===z.type?(0,x.jsx)(n.A,{size:20}):(0,x.jsx)(i.A,{size:20}),z.message]}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 flex flex-wrap gap-4 items-center",children:(0,x.jsxs)("div",{className:"relative w-full max-w-[300px]",children:[(0,x.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,x.jsx)("label",{htmlFor:"search-designations",className:"sr-only",children:"Search Designations"}),(0,x.jsx)("input",{type:"text",id:"search-designations",name:"search",autoComplete:"off",placeholder:"Search designations...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",value:b,onChange:e=>p(e.target.value)})]})})}),(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:[(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Description"}),(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),E&&(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,x.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m?(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"Loading designations..."})}):0===T.length?(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No designations found."})}):T.map(e=>(0,x.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",children:e.description||"-"}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:e.is_active?"Active":"Inactive"})}),E&&(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,x.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,x.jsx)("button",{onClick:()=>(async(e,t)=>{const s=a.map(a=>a.id===e?(0,r.A)((0,r.A)({},a),{},{is_active:!t}):a);u(s);try{await c.A.put("/designations/".concat(e),(0,r.A)((0,r.A)({},a.find(t=>t.id===e)),{},{is_active:!t})),O("success","Status updated."),L()}catch(i){O("error","Failed to update status."),L()}})(e.id,e.is_active),className:"text-xs ".concat(e.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),children:e.is_active?"Disable":"Enable"}),(0,x.jsx)("button",{onClick:()=>q("edit",e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this designation?"))try{await c.A.delete("/designations/".concat(e)),O("success","Designation deleted successfully!"),L()}catch(r){var t,a;O("error",(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to delete.")}})(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id))})]})})]}),y&&(0,x.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-200 dark:border-gray-700 animate-in fade-in zoom-in duration-200",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-gray-700",children:[(0,x.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"create"===v?"Add Designation":"Edit Designation"}),(0,x.jsx)("button",{onClick:I,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:(0,x.jsx)(l.A,{size:20})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),D(!0),S({});try{"create"===v?(await c.A.post("/designations",N),O("success","Designation created successfully!")):(await c.A.put("/designations/".concat(k.id),N),O("success","Designation updated successfully!")),L(),I()}catch(r){var t,a;if(r.response&&422===r.response.status)S(r.response.data.errors);else O("error",(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Operation failed.")}finally{D(!1)}},className:"p-6 space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("label",{htmlFor:"designation_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Designation Name ",(0,x.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,x.jsx)("input",{type:"text",id:"designation_name",name:"name",autoComplete:"off",required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"e.g. Senior Developer",value:N.name,onChange:e=>A((0,r.A)((0,r.A)({},N),{},{name:e.target.value}))}),_.name&&(0,x.jsx)("p",{className:"text-red-500 text-xs mt-1",children:_.name[0]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"designation_description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,x.jsx)("textarea",{id:"designation_description",name:"description",autoComplete:"off",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors resize-none h-24",placeholder:"Optional description...",value:N.description||"",onChange:e=>A((0,r.A)((0,r.A)({},N),{},{description:e.target.value}))}),_.description&&(0,x.jsx)("p",{className:"text-red-500 text-xs mt-1",children:_.description[0]})]}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",checked:N.is_active,onChange:e=>A((0,r.A)((0,r.A)({},N),{},{is_active:e.target.checked}))}),(0,x.jsx)("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Active Status"})]}),(0,x.jsxs)("div",{className:"pt-4 flex gap-3",children:[(0,x.jsx)("button",{type:"button",onClick:I,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors font-medium",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:C,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2",children:C?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):"Save Designation"})]})]})]})})]})}},5461:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});a(5043);var r=a(1099),s=a(579);const i=()=>(0,s.jsx)(r.A,{})}}]);
//# sourceMappingURL=461.70363a06.chunk.js.map