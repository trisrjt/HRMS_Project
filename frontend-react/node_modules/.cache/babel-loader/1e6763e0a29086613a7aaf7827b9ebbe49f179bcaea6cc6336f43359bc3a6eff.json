{"ast":null,"code":"var _jsxFileName = \"D:\\\\wamp64\\\\www\\\\hrms\\\\frontend-react\\\\src\\\\routes\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst routeRoleMap = {\n  \"/dashboard\": [1, 2, 3, 4],\n  \"/employees\": [1, 2, 3],\n  \"/departments\": [1],\n  \"/designations\": [1],\n  \"/attendance\": [1, 2, 3],\n  \"/leaves\": [1, 2, 3],\n  \"/salaries\": [1, 2],\n  \"/payslips\": [1, 2],\n  \"/documents\": [1, 2, 3],\n  \"/recruitment\": [1, 2, 3],\n  \"/performance-reviews\": [1, 2],\n  \"/announcements\": [1],\n  \"/settings\": [1]\n};\nconst ProtectedRoute = ({\n  children\n}) => {\n  _s();\n  const location = useLocation();\n  const {\n    user,\n    token,\n    isBootstrapping\n  } = useAuth();\n  if (isBootstrapping) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n  if (!token || !user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 12\n    }, this);\n  }\n  const allowedRoles = routeRoleMap[location.pathname];\n  if (allowedRoles && !allowedRoles.includes(user.role_id)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"vmZ8kY+SAEJiI0iVRUU8ruzR/Gw=\", false, function () {\n  return [useLocation, useAuth];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","routeRoleMap","ProtectedRoute","children","_s","location","user","token","isBootstrapping","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","allowedRoles","pathname","includes","role_id","_c","$RefreshReg$"],"sources":["D:/wamp64/www/hrms/frontend-react/src/routes/ProtectedRoute.js"],"sourcesContent":["import { Navigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\n\r\nconst routeRoleMap = {\r\n  \"/dashboard\": [1, 2, 3, 4],\r\n  \"/employees\": [1, 2, 3],\r\n  \"/departments\": [1],\r\n  \"/designations\": [1],\r\n  \"/attendance\": [1, 2, 3],\r\n  \"/leaves\": [1, 2, 3],\r\n  \"/salaries\": [1, 2],\r\n  \"/payslips\": [1, 2],\r\n  \"/documents\": [1, 2, 3],\r\n  \"/recruitment\": [1, 2, 3],\r\n  \"/performance-reviews\": [1, 2],\r\n  \"/announcements\": [1],\r\n  \"/settings\": [1],\r\n};\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const location = useLocation();\r\n  const { user, token, isBootstrapping } = useAuth();\r\n\r\n  if (isBootstrapping) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (!token || !user) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  const allowedRoles = routeRoleMap[location.pathname];\r\n  if (allowedRoles && !allowedRoles.includes(user.role_id)) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n\r\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,YAAY,GAAG;EACnB,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC1B,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACvB,cAAc,EAAE,CAAC,CAAC,CAAC;EACnB,eAAe,EAAE,CAAC,CAAC,CAAC;EACpB,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACxB,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACpB,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACnB,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACnB,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACvB,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACzB,sBAAsB,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EAC9B,gBAAgB,EAAE,CAAC,CAAC,CAAC;EACrB,WAAW,EAAE,CAAC,CAAC;AACjB,CAAC;AAED,MAAMC,cAAc,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACvC,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAES,IAAI;IAAEC,KAAK;IAAEC;EAAgB,CAAC,GAAGV,OAAO,CAAC,CAAC;EAElD,IAAIU,eAAe,EAAE;IACnB,oBAAOR,OAAA;MAAAG,QAAA,EAAK;IAAU;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC9B;EAEA,IAAI,CAACL,KAAK,IAAI,CAACD,IAAI,EAAE;IACnB,oBAAON,OAAA,CAACJ,QAAQ;MAACiB,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzC;EAEA,MAAMG,YAAY,GAAGd,YAAY,CAACI,QAAQ,CAACW,QAAQ,CAAC;EACpD,IAAID,YAAY,IAAI,CAACA,YAAY,CAACE,QAAQ,CAACX,IAAI,CAACY,OAAO,CAAC,EAAE;IACxD,oBAAOlB,OAAA,CAACJ,QAAQ;MAACiB,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;EAEA,OAAOT,QAAQ;AACjB,CAAC;AAACC,EAAA,CAlBIF,cAAc;EAAA,QACDL,WAAW,EACaC,OAAO;AAAA;AAAAqB,EAAA,GAF5CjB,cAAc;AAoBpB,eAAeA,cAAc;AAAC,IAAAiB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}